<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Scheduling Jobs for Maximum Efficiency - Part 2 | Matthew Crews</title>

<meta name="keywords" content="" />
<meta name="description" content="In my previous post I introduced a scheduling problem where I needed to assign jobs to machines to achieve the maximum efficiency. We say efficiency is calculated as the number of times a machine must change the job-type it is working on. I want to continue exploring this problem by adding some nuance.
 Note: Full code for this post can be found here
 Not Too Many Bad Jobs As my conversation continued with my friend regarding this problem a new constraint came up.">
<meta name="author" content="">
<link rel="canonical" href="https://matthewcrews.com/blog/2021/01/2021-01-28/" />
<link href="/assets/css/stylesheet.min.d5d820de85dae34a78c22303e07aa685bb90ec25a056c702c0b1a964ca68861d.css" integrity="sha256-1dgg3oXa40p4wiMD4HqmhbuQ7CWgVscCwLGpZMpohh0=" rel="preload stylesheet"
    as="style">

<link rel="icon" href="https://matthewcrews.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://matthewcrews.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://matthewcrews.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://matthewcrews.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://matthewcrews.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.78.2" />


<meta property="og:title" content="Scheduling Jobs for Maximum Efficiency - Part 2" />
<meta property="og:description" content="In my previous post I introduced a scheduling problem where I needed to assign jobs to machines to achieve the maximum efficiency. We say efficiency is calculated as the number of times a machine must change the job-type it is working on. I want to continue exploring this problem by adding some nuance.
 Note: Full code for this post can be found here
 Not Too Many Bad Jobs As my conversation continued with my friend regarding this problem a new constraint came up." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://matthewcrews.com/blog/2021/01/2021-01-28/" />
<meta property="article:published_time" content="2021-01-28T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-01-28T00:00:00+00:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Scheduling Jobs for Maximum Efficiency - Part 2"/>
<meta name="twitter:description" content="In my previous post I introduced a scheduling problem where I needed to assign jobs to machines to achieve the maximum efficiency. We say efficiency is calculated as the number of times a machine must change the job-type it is working on. I want to continue exploring this problem by adding some nuance.
 Note: Full code for this post can be found here
 Not Too Many Bad Jobs As my conversation continued with my friend regarding this problem a new constraint came up."/>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Scheduling Jobs for Maximum Efficiency - Part 2",
  "name": "Scheduling Jobs for Maximum Efficiency - Part 2",
  "description": "In my previous post I introduced a scheduling problem where I needed to assign jobs to machines to achieve the maximum efficiency. We say efficiency is calculated as the number of …",
  "keywords": [
    
  ],
  "articleBody": "In my previous post I introduced a scheduling problem where I needed to assign jobs to machines to achieve the maximum efficiency. We say efficiency is calculated as the number of times a machine must change the job-type it is working on. I want to continue exploring this problem by adding some nuance.\n Note: Full code for this post can be found here\n Not Too Many Bad Jobs As my conversation continued with my friend regarding this problem a new constraint came up. It turns out there is a fourth job-type, let’s call it job-type D, that can cause significant wear on a machine if it is run for too long. He wanted to add a constraint to the problem which would limit that amount of job-type D assigned to any given machine. In his case, he wanted a machine to have no more than 50% of the total work assigned to it to be of job-type D. Fortunately this is a relatively simple update to our model.\nRefactoring the Domain The great thing about F# is that it is easy to refactor our domain. In our case the Job type and the Machine type don’t need to change. What does need to be updated is the JobType type. We will add another case to the discriminated union to represent job-type D. I have also decided to do some refactoring and clean up how the code is organized. We are also going to move all the type definitions into their own Module.\nmodule Types = // The Domain  [RequireQualifiedAccess] type JobType = | A | B | C | D // This is the new case we have added  type Job = { Id : int JobType : JobType Size : float } with override this.ToString () = $\"Job_{this.Id}\" type Machine = { Id : int JobTypes : SetJobType } with override this.ToString () = $\"Machine_{this.Id}\" Next, we need to adjust our data generation. Again, we are going to do some code cleanup and move all the code for generating random jobs and machines into its own module. We are adjusting two thing from the previous post. The jobTypes Array had the new JobType case. We are also going to adjust the jobTypeSets. This is the possible job qualifications for a machine. In our new problem, job-type A is the most difficult and therefore fewer machines are qualified. All machines are capable of job-type D, even though it is not preferred.\nmodule DataGeneration = open System open Types // Set of JobTypes for iterating over and sampling from  let jobTypes = [| JobType.A JobType.B JobType.C JobType.D // The new DU case we added  |] // Some theoretical JobTypeSets to be used in generating  // random Machines  let jobTypeSets = [| Set jobTypes Set jobTypes.[1..] Set jobTypes.[2..] |] let minJobSize = 1 let maxJobSize = 3 let randomJobSize (rng: Random) = rng.Next(minJobSize, maxJobSize) | float let randomJobType (rng: Random) = jobTypes.[rng.Next(0, jobTypes.Length)] let randomJobTypeSet (rng: Random) = jobTypeSets.[rng.Next(0, jobTypeSets.Length)] let randomJob (rng: Random) (id: int) = { Id = id JobType = randomJobType rng Size = randomJobSize rng } let randomMachine (rng: Random) (id: int) = { Id = id JobTypes = randomJobTypeSet rng } Updating Our Model I won’t go over all the model code that we created before. I am just going to show the new constraints that we need to add to the original formulation. One of the reasons I love Mathematical Planning is that it makes it relatively easy to tweak and update models over time. If the code is well organized, it’s trivial to turn features on and off. To add our limits on the amount of job-type D that a machine has, let’s define a value which is the maximum percent of D allowed.\n// Limit on the amount of JobType D on any given machine let maxJobTypeDPercentage = 0.30 Now we want to create a constraint for each of our machines which says the the percent of the total work assigned to the machine is no more than this percentage. Fortunately, this is relatively easy with Flips.\nlet maxJobTypeDConstraints = ConstraintBuilder \"MaxTypeD\" { for machine in machines - let totalWork = sum (assignments.[machine, All, All] .* jobSizes) let jobTypeDWork = sum (assignments.[machine, JobType.D, All] .* jobSizes) jobTypeDWork  maxJobTypeDPercentage * totalWork } Okay, let’s unpack this. We are using the ConstraintBuilder Computation Expression to create a constraint for each machine in machines. We then calculate the total amount of work assigned to a machine by using the assignments SliceMap and selecting all the assignments for our machine and performing elementwise multiplication, .*, by the jobSizes. We then sum that up to get the total amount of work assigned to the machine. We store that expression in the totalWork value.\nTo get the total amount of job-type D work assigned to the machine, we need to sub-select the assignments SliceMap for the machine and JobType.D then elementwise multiply by the jobSizes. We sum these values up to get the jobTypeDWork expression. totalWork is an expression which represents the total amount of work assigned to the machine. jobTypeDWork represent the total amount of job-type D assigned to the machine.\nWe can now create our constraint expression. We state that jobTypeDWork must be less or equal to the totalWork expression multiplied by the max allowed percentage of job-type D, maxJobTypeDPercentage. This constraint will limit just how much work of job-type D that is allowed on the machine. That’s all we must do to accommodate this new restriction from my friend.\nUnpacking the Results The only other change my friend asked for was to increase the number of jobs up to 100 because it would be more represented of the size of the real-world problem. With that adjustment, we can now compose our new model with these new constraints included.\nlet model = Model.create minSetupsObjective | Model.addConstraints maxWorkConstraints | Model.addConstraints minWorkConstraints | Model.addConstraint maxWorkDifferenceConstraint | Model.addConstraints setupConstraints | Model.addConstraints jobsAssignmentConstraints | Model.addConstraints maxJobTypeDConstraints // Our new constraints We setup our solver settings and attempt to solve.\n// Give the solver plenty of time to find a solution let settings = { Settings.basic with MaxDuration = 60_000L } let result = Solver.solve settings model We now inspect the result. We add a couple of functions for getting the job assignments for each machine and summarizing the total loading of the machines.\n// This will return a list let getMachineAssignments (solution: Solution) (assignments: SMap3Machine, JobType, Job, Decision) = Solution.getValues solution assignments | Map.filter (fun _ v - v = 1.0) | Map.toList | List.map (fun ((machine, _, job), _) - machine, job) | List.sortBy (fun (machine, job) - machine.Id, job.Id) | List.groupBy fst | List.map (fun (machine, jobs) - machine, jobs | List.map snd) // This create an anonymous record which holds the Machine, // the total loading and the job-type D loading let getMachineLoading jobAssignments = jobAssignments | List.map (fun (machine, jobs) - {| Machine = machine TotalWork = jobs | List.sumBy (fun j - j.Size) JobTypeDWork = jobs | List.filter (fun j - j.JobType = JobType.D) | List.sumBy (fun j - j.Size) |}) We then use these to analyze the result and print out what we found.\nmatch result with | Optimal solution - // Get which jobs are assigned to each machine  let machineAssignments = getMachineAssignments solution assignments // Calculate the total work for each machine and the amount of job-type D  let machineLoads = getMachineLoading machineAssignments printfn \"\" printfn \"Machine Loading:\" for (m) in machineLoads do // Print out the loading for each machine and the percent of job-type D work  printfn $\"Machine: {m.Machine.Id} | Total Work: {m.TotalWork} | Type D Work %.2f{m.JobTypeDWork / m.TotalWork} %%\" // Find the min and max loads and calculate the difference  let maxDifference = let loads = machineLoads | List.map (fun m - m.TotalWork) (List.max loads) - (List.min loads) printfn \"\" printfn $\"Max Difference in Loading: { maxDifference }\" | _ - printfn \"%A\" result This will show the following results.\nMachine Loading:\rMachine: 1 | Total Work: 28 | Type D Work 0.00 %\rMachine: 2 | Total Work: 28 | Type D Work 0.50 %\rMachine: 3 | Total Work: 29 | Type D Work 0.00 %\rMachine: 4 | Total Work: 30 | Type D Work 0.50 %\rMachine: 5 | Total Work: 29 | Type D Work 0.00 %\rMax Difference in Loading: 2\rYou can see that the machines are evenly loaded according to the maximum allowable difference and that no machine has more than 50% loading of job-type D. I would say that we have a success!\nTakeaways We are only beginning to look at variations of this problem. Hopefully, what you have been able to observe was that it was simple to update our model code to add this new requirement my friend found. I think that is part of the beautify of Mathematical Planning. Updating and adjusting the logic can be simple. In our next post we are going to look at what happens when we add capacity for the machines and our problem becomes unsolvable!\n",
  "wordCount" : "1516",
  "inLanguage": "en",
  "datePublished": "2021-01-28T00:00:00Z",
  "dateModified": "2021-01-28T00:00:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://matthewcrews.com/blog/2021/01/2021-01-28/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Matthew Crews",
    "logo": {
      "@type": "ImageObject",
      "url": "https://matthewcrews.com/favicon.ico"
    }
  }
}
</script>



</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        .theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://matthewcrews.com" accesskey="h" title="Matthew Crews (Alt + H)">Matthew Crews</a>
            <span class="logo-switches">
                <span class="theme-toggle" title="(Alt + T)">
                    <a id="theme-toggle" accesskey="t">
                        <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg>
                        <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                    </a>
                </span>
                
            </span>
        </div>
        <ul class="menu" id="menu" onscroll="menu_on_scroll()">
            <li>
                <a href="https://matthewcrews.com/about" title="About">
                    <span>About</span>
                </a>
            </li></ul>
    </nav>
</header>

    <main class="main">

<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">
      Scheduling Jobs for Maximum Efficiency - Part 2
    </h1>
    <div class="post-description">
      
    </div>
    <div class="post-meta">January 28, 2021

    </div>
  </header> 

  <div class="post-content">
<p>In my previous <a href="/blog/2021/01/2021-01-25/">post</a> I introduced a scheduling problem where I needed to assign jobs to machines to achieve the maximum efficiency. We say efficiency is calculated as the number of times a machine must change the job-type it is working on. I want to continue exploring this problem by adding some nuance.</p>
<blockquote>
<p><strong>Note</strong>: Full code for this post can be found <a href="">here</a></p>
</blockquote>
<h2 id="not-too-many-bad-jobs">Not Too Many Bad Jobs<a hidden class="anchor" aria-hidden="true" href="#not-too-many-bad-jobs">#</a></h2>
<p>As my conversation continued with my friend regarding this problem a new constraint came up. It turns out there is a fourth job-type, let&rsquo;s call it job-type D, that can cause significant wear on a machine if it is run for too long. He wanted to add a constraint to the problem which would limit that amount of job-type D assigned to any given machine. In his case, he wanted a machine to have no more than 50% of the total work assigned to it to be of job-type D. Fortunately this is a relatively simple update to our model.</p>
<h2 id="refactoring-the-domain">Refactoring the Domain<a hidden class="anchor" aria-hidden="true" href="#refactoring-the-domain">#</a></h2>
<p>The great thing about F# is that it is easy to refactor our domain. In our case the <code>Job</code> type and the <code>Machine</code> type don&rsquo;t need to change. What does need to be updated is the <code>JobType</code> type. We will add another case to the discriminated union to represent job-type D. I have also decided to do some refactoring and clean up how the code is organized. We are also going to move all the type definitions into their own Module.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#66d9ef">module</span> Types <span style="color:#f92672">=</span>

    <span style="color:#75715e">// The Domain
</span><span style="color:#75715e"></span>    <span style="color:#f92672">[&lt;</span>RequireQualifiedAccess<span style="color:#f92672">&gt;]</span>
    <span style="color:#66d9ef">type</span> <span style="color:#a6e22e">JobType</span> <span style="color:#f92672">=</span>
        <span style="color:#f92672">|</span> A
        <span style="color:#f92672">|</span> B
        <span style="color:#f92672">|</span> C
        <span style="color:#f92672">|</span> D <span style="color:#75715e">// This is the new case we have added
</span><span style="color:#75715e"></span>
    <span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Job</span> <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>
        Id <span style="color:#f92672">:</span> int
        JobType <span style="color:#f92672">:</span> JobType
        Size <span style="color:#f92672">:</span> <span style="color:#66d9ef">float</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">with</span>
        <span style="color:#66d9ef">override</span> this.<span style="color:#a6e22e">ToString</span> () <span style="color:#f92672">=</span>
            <span style="color:#f92672">$</span><span style="color:#e6db74">&#34;Job_{this.Id}&#34;</span>

    <span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Machine</span> <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>
        Id <span style="color:#f92672">:</span> int
        JobTypes <span style="color:#f92672">:</span> Set<span style="color:#f92672">&lt;</span>JobType<span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">with</span>
        <span style="color:#66d9ef">override</span> this.<span style="color:#a6e22e">ToString</span> () <span style="color:#f92672">=</span>
            <span style="color:#f92672">$</span><span style="color:#e6db74">&#34;Machine_{this.Id}&#34;</span>
</code></pre></div><p>Next, we need to adjust our data generation. Again, we are going to do some code cleanup and move all the code for generating random jobs and machines into its own module. We are adjusting two thing from the <a href="/blog/2021/01/2021-01-25/">previous post</a>. The <code>jobTypes</code> Array had the new <code>JobType</code> case. We are also going to adjust the <code>jobTypeSets</code>. This is the possible job qualifications for a machine. In our new problem, job-type A is the most difficult and therefore fewer machines are qualified. All machines are capable of job-type D, even though it is not preferred.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#66d9ef">module</span> DataGeneration <span style="color:#f92672">=</span>

    <span style="color:#66d9ef">open</span> System
    <span style="color:#66d9ef">open</span> Types

    <span style="color:#75715e">// Set of JobTypes for iterating over and sampling from
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> jobTypes <span style="color:#f92672">=</span> 
        <span style="color:#f92672">[|</span>
            JobType.A
            JobType.B
            JobType.C
            JobType.D <span style="color:#75715e">// The new DU case we added
</span><span style="color:#75715e"></span>        <span style="color:#f92672">|]</span>

    <span style="color:#75715e">// Some theoretical JobTypeSets to be used in generating
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// random Machines
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> jobTypeSets <span style="color:#f92672">=</span>
        <span style="color:#f92672">[|</span>
            Set jobTypes
            Set jobTypes<span style="color:#f92672">.[</span>1<span style="color:#f92672">..]</span>
            Set jobTypes<span style="color:#f92672">.[</span>2<span style="color:#f92672">..]</span>
        <span style="color:#f92672">|]</span>

    <span style="color:#66d9ef">let</span> minJobSize <span style="color:#f92672">=</span> 1
    <span style="color:#66d9ef">let</span> maxJobSize <span style="color:#f92672">=</span> 3

    <span style="color:#66d9ef">let</span> randomJobSize <span style="color:#f92672">(</span>rng<span style="color:#f92672">:</span> Random<span style="color:#f92672">)</span> <span style="color:#f92672">=</span>
        rng<span style="color:#f92672">.</span>Next<span style="color:#f92672">(</span>minJobSize<span style="color:#f92672">,</span> maxJobSize<span style="color:#f92672">)</span>
        <span style="color:#f92672">|&gt;</span> <span style="color:#66d9ef">float</span>

    <span style="color:#66d9ef">let</span> randomJobType <span style="color:#f92672">(</span>rng<span style="color:#f92672">:</span> Random<span style="color:#f92672">)</span> <span style="color:#f92672">=</span>
        jobTypes<span style="color:#f92672">.[</span>rng<span style="color:#f92672">.</span>Next<span style="color:#f92672">(</span>0<span style="color:#f92672">,</span> jobTypes<span style="color:#f92672">.</span>Length<span style="color:#f92672">)]</span>

    <span style="color:#66d9ef">let</span> randomJobTypeSet <span style="color:#f92672">(</span>rng<span style="color:#f92672">:</span> Random<span style="color:#f92672">)</span> <span style="color:#f92672">=</span>
        jobTypeSets<span style="color:#f92672">.[</span>rng<span style="color:#f92672">.</span>Next<span style="color:#f92672">(</span>0<span style="color:#f92672">,</span> jobTypeSets<span style="color:#f92672">.</span>Length<span style="color:#f92672">)]</span>

    <span style="color:#66d9ef">let</span> randomJob <span style="color:#f92672">(</span>rng<span style="color:#f92672">:</span> Random<span style="color:#f92672">)</span> <span style="color:#f92672">(</span>id<span style="color:#f92672">:</span> int<span style="color:#f92672">)</span> <span style="color:#f92672">=</span>
        <span style="color:#f92672">{</span> 
            Id <span style="color:#f92672">=</span> id
            JobType <span style="color:#f92672">=</span> randomJobType rng
            Size <span style="color:#f92672">=</span> randomJobSize rng 
        <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">let</span> randomMachine <span style="color:#f92672">(</span>rng<span style="color:#f92672">:</span> Random<span style="color:#f92672">)</span> <span style="color:#f92672">(</span>id<span style="color:#f92672">:</span> int<span style="color:#f92672">)</span> <span style="color:#f92672">=</span>
        <span style="color:#f92672">{</span>
            Id <span style="color:#f92672">=</span> id
            JobTypes <span style="color:#f92672">=</span> randomJobTypeSet rng
        <span style="color:#f92672">}</span>
</code></pre></div><h2 id="updating-our-model">Updating Our Model<a hidden class="anchor" aria-hidden="true" href="#updating-our-model">#</a></h2>
<p>I won&rsquo;t go over all the model code that we created before. I am just going to show the new constraints that we need to add to the original formulation. One of the reasons I love Mathematical Planning is that it makes it relatively easy to tweak and update models over time. If the code is well organized, it&rsquo;s trivial to turn features on and off. To add our limits on the amount of job-type D that a machine has, let&rsquo;s define a value which is the maximum percent of D allowed.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#75715e">// Limit on the amount of JobType D on any given machine
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> maxJobTypeDPercentage <span style="color:#f92672">=</span> 0<span style="color:#f92672">.</span>30
</code></pre></div><p>Now we want to create a constraint for each of our machines which says the the percent of the total work assigned to the machine is no more than this percentage. Fortunately, this is relatively easy with Flips.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#66d9ef">let</span> maxJobTypeDConstraints <span style="color:#f92672">=</span>
    ConstraintBuilder <span style="color:#e6db74">&#34;MaxTypeD&#34;</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">for</span> machine <span style="color:#66d9ef">in</span> machines <span style="color:#f92672">-&gt;</span>
            <span style="color:#66d9ef">let</span> totalWork <span style="color:#f92672">=</span> sum <span style="color:#f92672">(</span>assignments<span style="color:#f92672">.[</span>machine<span style="color:#f92672">,</span> All<span style="color:#f92672">,</span> All<span style="color:#f92672">]</span> <span style="color:#f92672">.*</span> jobSizes<span style="color:#f92672">)</span>
            <span style="color:#66d9ef">let</span> jobTypeDWork <span style="color:#f92672">=</span> sum <span style="color:#f92672">(</span>assignments<span style="color:#f92672">.[</span>machine<span style="color:#f92672">,</span> JobType.D<span style="color:#f92672">,</span> All<span style="color:#f92672">]</span> <span style="color:#f92672">.*</span> jobSizes<span style="color:#f92672">)</span>
            jobTypeDWork <span style="color:#f92672">&lt;==</span> maxJobTypeDPercentage <span style="color:#f92672">*</span> totalWork
    <span style="color:#f92672">}</span>
</code></pre></div><p>Okay, let&rsquo;s unpack this. We are using the <code>ConstraintBuilder</code> Computation Expression to create a constraint for each <code>machine</code> in <code>machines</code>. We then calculate the total amount of work assigned to a <code>machine</code> by using the <code>assignments</code> SliceMap and selecting all the assignments for our <code>machine</code> and performing elementwise multiplication, <code>.*</code>, by the <code>jobSizes</code>. We then sum that up to get the total amount of work assigned to the <code>machine</code>. We store that expression in the <code>totalWork</code> value.</p>
<p>To get the total amount of job-type D work assigned to the machine, we need to sub-select the <code>assignments</code> SliceMap for the <code>machine</code> and <code>JobType.D</code> then elementwise multiply by the <code>jobSizes</code>. We sum these values up to get the <code>jobTypeDWork</code> expression. <code>totalWork</code> is an expression which represents the total amount of work assigned to the <code>machine</code>. <code>jobTypeDWork</code> represent the total amount of job-type D assigned to the <code>machine</code>.</p>
<p>We can now create our constraint expression. We state that <code>jobTypeDWork</code> must be less or equal to the <code>totalWork</code> expression multiplied by the max allowed percentage of job-type D, <code>maxJobTypeDPercentage</code>. This constraint will limit just how much work of job-type D that is allowed on the machine. That&rsquo;s all we must do to accommodate this new restriction from my friend.</p>
<h2 id="unpacking-the-results">Unpacking the Results<a hidden class="anchor" aria-hidden="true" href="#unpacking-the-results">#</a></h2>
<p>The only other change my friend asked for was to increase the number of jobs up to 100 because it would be more represented of the size of the real-world problem. With that adjustment, we can now compose our new model with these new constraints included.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#66d9ef">let</span> model <span style="color:#f92672">=</span>
    Model.create minSetupsObjective
    <span style="color:#f92672">|&gt;</span> Model.addConstraints maxWorkConstraints
    <span style="color:#f92672">|&gt;</span> Model.addConstraints minWorkConstraints
    <span style="color:#f92672">|&gt;</span> Model.addConstraint maxWorkDifferenceConstraint
    <span style="color:#f92672">|&gt;</span> Model.addConstraints setupConstraints
    <span style="color:#f92672">|&gt;</span> Model.addConstraints jobsAssignmentConstraints
    <span style="color:#f92672">|&gt;</span> Model.addConstraints maxJobTypeDConstraints <span style="color:#75715e">// Our new constraints
</span></code></pre></div><p>We setup our solver settings and attempt to solve.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#75715e">// Give the solver plenty of time to find a solution
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> settings <span style="color:#f92672">=</span> <span style="color:#f92672">{</span> Settings.basic <span style="color:#66d9ef">with</span> MaxDuration <span style="color:#f92672">=</span> 60_000L <span style="color:#f92672">}</span>

<span style="color:#66d9ef">let</span> result <span style="color:#f92672">=</span> Solver.solve settings model
</code></pre></div><p>We now inspect the result. We add a couple of functions for getting the job assignments for each machine and summarizing the total loading of the machines.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#75715e">// This will return a list&lt;Machine * list&lt;Job&gt;&gt;
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> getMachineAssignments <span style="color:#f92672">(</span>solution<span style="color:#f92672">:</span> Solution<span style="color:#f92672">)</span> <span style="color:#f92672">(</span>assignments<span style="color:#f92672">:</span> SMap3<span style="color:#f92672">&lt;</span>Machine<span style="color:#f92672">,</span> JobType<span style="color:#f92672">,</span> Job<span style="color:#f92672">,</span> Decision<span style="color:#f92672">&gt;)</span> <span style="color:#f92672">=</span>
    Solution.getValues solution assignments
    <span style="color:#f92672">|&gt;</span> Map.filter <span style="color:#f92672">(</span><span style="color:#66d9ef">fun</span> <span style="color:#f92672">_</span> v <span style="color:#f92672">-&gt;</span> v <span style="color:#f92672">=</span> 1<span style="color:#f92672">.</span>0<span style="color:#f92672">)</span>
    <span style="color:#f92672">|&gt;</span> Map.toList
    <span style="color:#f92672">|&gt;</span> List.map <span style="color:#f92672">(</span><span style="color:#66d9ef">fun</span> <span style="color:#f92672">((</span>machine<span style="color:#f92672">,</span> <span style="color:#f92672">_,</span> job<span style="color:#f92672">),</span> <span style="color:#f92672">_)</span> <span style="color:#f92672">-&gt;</span> machine<span style="color:#f92672">,</span> job<span style="color:#f92672">)</span>
    <span style="color:#f92672">|&gt;</span> List.sortBy <span style="color:#f92672">(</span><span style="color:#66d9ef">fun</span> <span style="color:#f92672">(</span>machine<span style="color:#f92672">,</span> job<span style="color:#f92672">)</span> <span style="color:#f92672">-&gt;</span> machine<span style="color:#f92672">.</span>Id<span style="color:#f92672">,</span> job<span style="color:#f92672">.</span>Id<span style="color:#f92672">)</span>
    <span style="color:#f92672">|&gt;</span> List.groupBy fst
    <span style="color:#f92672">|&gt;</span> List.map <span style="color:#f92672">(</span><span style="color:#66d9ef">fun</span> <span style="color:#f92672">(</span>machine<span style="color:#f92672">,</span> jobs<span style="color:#f92672">)</span> <span style="color:#f92672">-&gt;</span> machine<span style="color:#f92672">,</span> jobs <span style="color:#f92672">|&gt;</span> List.map snd<span style="color:#f92672">)</span>

<span style="color:#75715e">// This create an anonymous record which holds the Machine,
</span><span style="color:#75715e">// the total loading and the job-type D loading
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> getMachineLoading jobAssignments <span style="color:#f92672">=</span>
    jobAssignments
    <span style="color:#f92672">|&gt;</span> List.map <span style="color:#f92672">(</span><span style="color:#66d9ef">fun</span> <span style="color:#f92672">(</span>machine<span style="color:#f92672">,</span> jobs<span style="color:#f92672">)</span> <span style="color:#f92672">-&gt;</span> 
        <span style="color:#f92672">{|</span> Machine <span style="color:#f92672">=</span> machine
           TotalWork <span style="color:#f92672">=</span> 
                jobs 
                <span style="color:#f92672">|&gt;</span> List.sumBy <span style="color:#f92672">(</span><span style="color:#66d9ef">fun</span> j <span style="color:#f92672">-&gt;</span> j<span style="color:#f92672">.</span>Size<span style="color:#f92672">)</span>
           JobTypeDWork <span style="color:#f92672">=</span> 
                jobs 
                <span style="color:#f92672">|&gt;</span> List.filter <span style="color:#f92672">(</span><span style="color:#66d9ef">fun</span> j <span style="color:#f92672">-&gt;</span> j<span style="color:#f92672">.</span>JobType <span style="color:#f92672">=</span> JobType.D<span style="color:#f92672">)</span> 
                <span style="color:#f92672">|&gt;</span> List.sumBy <span style="color:#f92672">(</span><span style="color:#66d9ef">fun</span> j <span style="color:#f92672">-&gt;</span> j<span style="color:#f92672">.</span>Size<span style="color:#f92672">)</span>
        <span style="color:#f92672">|})</span>
</code></pre></div><p>We then use these to analyze the result and print out what we found.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#66d9ef">match</span> result <span style="color:#66d9ef">with</span>
<span style="color:#f92672">|</span> Optimal solution <span style="color:#f92672">-&gt;</span>

    <span style="color:#75715e">// Get which jobs are assigned to each machine
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> machineAssignments <span style="color:#f92672">=</span> getMachineAssignments solution assignments

    <span style="color:#75715e">// Calculate the total work for each machine and the amount of job-type D
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> machineLoads <span style="color:#f92672">=</span> getMachineLoading machineAssignments

    printfn <span style="color:#e6db74">&#34;&#34;</span>
    printfn <span style="color:#e6db74">&#34;Machine Loading:&#34;</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>m<span style="color:#f92672">)</span> <span style="color:#66d9ef">in</span> machineLoads <span style="color:#66d9ef">do</span>
        <span style="color:#75715e">// Print out the loading for each machine and the percent of job-type D work
</span><span style="color:#75715e"></span>        printfn <span style="color:#f92672">$</span><span style="color:#e6db74">&#34;Machine: {m.Machine.Id} | Total Work: {m.TotalWork} | Type D Work %.2f{m.JobTypeDWork / m.TotalWork} %%&#34;</span>

    <span style="color:#75715e">// Find the min and max loads and calculate the difference
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> maxDifference <span style="color:#f92672">=</span>
        <span style="color:#66d9ef">let</span> loads <span style="color:#f92672">=</span> machineLoads <span style="color:#f92672">|&gt;</span> List.map <span style="color:#f92672">(</span><span style="color:#66d9ef">fun</span> m <span style="color:#f92672">-&gt;</span> m<span style="color:#f92672">.</span>TotalWork<span style="color:#f92672">)</span>
        <span style="color:#f92672">(</span>List.max loads<span style="color:#f92672">)</span> <span style="color:#f92672">-</span> <span style="color:#f92672">(</span>List.min loads<span style="color:#f92672">)</span>

    printfn <span style="color:#e6db74">&#34;&#34;</span>
    printfn <span style="color:#f92672">$</span><span style="color:#e6db74">&#34;Max Difference in Loading: { maxDifference }&#34;</span>

<span style="color:#f92672">|</span> <span style="color:#f92672">_</span> <span style="color:#f92672">-&gt;</span> printfn <span style="color:#e6db74">&#34;%A&#34;</span> result
</code></pre></div><p>This will show the following results.</p>
<pre><code class="language-terminal" data-lang="terminal">Machine Loading:
Machine: 1 | Total Work: 28 | Type D Work 0.00 %
Machine: 2 | Total Work: 28 | Type D Work 0.50 %
Machine: 3 | Total Work: 29 | Type D Work 0.00 %
Machine: 4 | Total Work: 30 | Type D Work 0.50 %
Machine: 5 | Total Work: 29 | Type D Work 0.00 %

Max Difference in Loading: 2
</code></pre><p>You can see that the machines are evenly loaded according to the maximum allowable difference and that no machine has more than 50% loading of job-type D. I would say that we have a success!</p>
<h2 id="takeaways">Takeaways<a hidden class="anchor" aria-hidden="true" href="#takeaways">#</a></h2>
<p>We are only beginning to look at variations of this problem. Hopefully, what you have been able to observe was that it was simple to update our model code to add this new requirement my friend found. I think that is part of the beautify of Mathematical Planning. Updating and adjusting the logic can be simple. In our next post we are going to look at what happens when we add capacity for the machines and our problem becomes unsolvable!</p>

</div>
  <footer class="post-footer">



<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share Scheduling Jobs for Maximum Efficiency - Part 2 on twitter"
        href="https://twitter.com/intent/tweet/?text=Scheduling%20Jobs%20for%20Maximum%20Efficiency%20-%20Part%202&amp;url=https%3a%2f%2fmatthewcrews.com%2fblog%2f2021%2f01%2f2021-01-28%2f&amp;hashtags=">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Scheduling Jobs for Maximum Efficiency - Part 2 on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fmatthewcrews.com%2fblog%2f2021%2f01%2f2021-01-28%2f&amp;title=Scheduling%20Jobs%20for%20Maximum%20Efficiency%20-%20Part%202&amp;summary=Scheduling%20Jobs%20for%20Maximum%20Efficiency%20-%20Part%202&amp;source=https%3a%2f%2fmatthewcrews.com%2fblog%2f2021%2f01%2f2021-01-28%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Scheduling Jobs for Maximum Efficiency - Part 2 on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2fmatthewcrews.com%2fblog%2f2021%2f01%2f2021-01-28%2f&title=Scheduling%20Jobs%20for%20Maximum%20Efficiency%20-%20Part%202">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Scheduling Jobs for Maximum Efficiency - Part 2 on facebook"
        href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fmatthewcrews.com%2fblog%2f2021%2f01%2f2021-01-28%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Scheduling Jobs for Maximum Efficiency - Part 2 on whatsapp"
        href="https://api.whatsapp.com/send?text=Scheduling%20Jobs%20for%20Maximum%20Efficiency%20-%20Part%202%20-%20https%3a%2f%2fmatthewcrews.com%2fblog%2f2021%2f01%2f2021-01-28%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Scheduling Jobs for Maximum Efficiency - Part 2 on telegram"
        href="https://telegram.me/share/url?text=Scheduling%20Jobs%20for%20Maximum%20Efficiency%20-%20Part%202&amp;url=https%3a%2f%2fmatthewcrews.com%2fblog%2f2021%2f01%2f2021-01-28%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>

  </footer>
</article>
    </main><footer class="footer">
    <span>&copy; 2021 <a href="https://matthewcrews.com">Matthew Crews</a></span>
    <span>&middot;</span>
    <span>Powered by <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a></span>
    <span>&middot;</span>
    <span>Theme <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a></span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)">
    <button class="top-link" id="top-link" type="button" accesskey="g">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
    </button>
</a>



<script defer src="/assets/js/highlight.min.27cd435cc9ed6abb4b496581b151804f79f366c412620272bb94e2f5f598ebcc.js" integrity="sha256-J81DXMntartLSWWBsVGAT3nzZsQSYgJyu5Ti9fWY68w="
    onload="hljs.initHighlightingOnLoad();"></script>
<script>
    window.onload = function () {
        if (localStorage.getItem("menu-scroll-position")) {
            document.getElementById('menu').scrollLeft = localStorage.getItem("menu-scroll-position");
        }
    }
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.replaceState(null, null, `#${id}`);
            }
        });
    });
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

    function menu_on_scroll() {
        localStorage.setItem("menu-scroll-position", document.getElementById('menu').scrollLeft);
    }

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    MathJax = {
    tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
    }
    };
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
</script>
</body>

</html>
