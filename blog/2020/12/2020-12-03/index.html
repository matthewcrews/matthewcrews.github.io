<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>The Mentor Matching Problem | Matthew Crews</title>

<meta name="keywords" content="" />
<meta name="description" content="There are few things I love more than a fresh mathematical planning challenge so I was delighted when Kevin Avignon reached out to me and asked me to look at a question he had posted on the Software Engineer Stack Exchange site. He wanted to know whether the question was a candidate for Mathematical Planning. The question is a really interesting problem of pairing Mentors and Mentees. Mentors have a set of skills they can teach.">
<meta name="author" content="">
<link rel="canonical" href="https://matthewcrews.com/blog/2020/12/2020-12-03/" />
<link href="/assets/css/stylesheet.min.d5d820de85dae34a78c22303e07aa685bb90ec25a056c702c0b1a964ca68861d.css" integrity="sha256-1dgg3oXa40p4wiMD4HqmhbuQ7CWgVscCwLGpZMpohh0=" rel="preload stylesheet"
    as="style">

<link rel="icon" href="https://matthewcrews.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://matthewcrews.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://matthewcrews.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://matthewcrews.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://matthewcrews.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.78.2" />


<meta property="og:title" content="The Mentor Matching Problem" />
<meta property="og:description" content="There are few things I love more than a fresh mathematical planning challenge so I was delighted when Kevin Avignon reached out to me and asked me to look at a question he had posted on the Software Engineer Stack Exchange site. He wanted to know whether the question was a candidate for Mathematical Planning. The question is a really interesting problem of pairing Mentors and Mentees. Mentors have a set of skills they can teach." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://matthewcrews.com/blog/2020/12/2020-12-03/" />
<meta property="article:published_time" content="2020-12-03T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-12-03T00:00:00+00:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="The Mentor Matching Problem"/>
<meta name="twitter:description" content="There are few things I love more than a fresh mathematical planning challenge so I was delighted when Kevin Avignon reached out to me and asked me to look at a question he had posted on the Software Engineer Stack Exchange site. He wanted to know whether the question was a candidate for Mathematical Planning. The question is a really interesting problem of pairing Mentors and Mentees. Mentors have a set of skills they can teach."/>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "The Mentor Matching Problem",
  "name": "The Mentor Matching Problem",
  "description": "There are few things I love more than a fresh mathematical planning challenge so I was delighted when Kevin Avignon reached out to me and asked me to look at a question he had …",
  "keywords": [
    
  ],
  "articleBody": "There are few things I love more than a fresh mathematical planning challenge so I was delighted when Kevin Avignon reached out to me and asked me to look at a question he had posted on the Software Engineer Stack Exchange site. He wanted to know whether the question was a candidate for Mathematical Planning. The question is a really interesting problem of pairing Mentors and Mentees. Mentors have a set of skills they can teach. Mentees have a set of skills they are interested in learning. Both Mentors and Mentees only have certain times they are available. Mentors are also capable of mentoring multiple mentees.\nSo, for this sounds like a straightforward assignment problem but then there is a twist. The questioner wanted pairings of rare skills to be a higher priority than pairings of more common skills. Ah, now we have a Mathematical Planning problem! We have the three key ingredients:\n A Quantifiable Objective: We want to maximize the value of pairings based on the rarity of the skill Constraints to follow: Mentors and Mentees must match on skills and availability Decision to make: Which Mentors and Mentees do we pair at what time?  Any time I see those three ingredients, I know I have a Mathematical Planning problem on my hands. I respond to Kevin and say, “Yes! You have a great candidate for Mathematical Planning! I’ll put something together for you this evening.” I begin mulling this problem as the day goes by. Once the family is all in bed, I turn on my PC and start modeling!\nDefine the Domain The first thing I do is put together a tiny domain of types to represent my problem. I encourage anyone who is writing these models in F# to take advantage of domain modeling because it will protect you again some nefarious bugs. To learn more, check out Scott Wlaschin’s book Domain Modeling Made Functional.\nnamespace MentorMatching module Types = type MentorId = MentorId of string type MenteeId = MenteeId of string type Skill = Skill of string type Period = Period of int type MenteeCapacity = MenteeCapacity of int type Mentor = { MentorId : MentorId Skills : Skill Set Periods : Period Set MaxMentees : MenteeCapacity } type Mentee = { MenteeId : MenteeId Skills : Skill Set Periods : Period Set } This simple set of types represent the problem space that I will build a mathematical planning model around. I now want to create a function which builds the model. I like to type out the functions signatures of what I am trying to implement beforehand as a way to get a high-level overview for that I am about to build. It’s an idea I got from Mark Seemann in his excellent PluralSight course Type-Driven Development with F#. Here is the function signature that I come to.\nlet private buildModel (mentees:Mentee seq) (mentors:Mentor seq) (skillValue:SMapSkill,float) (pairingDecision:SMap4Skill,Period,Mentor,Mentee,Decision) : Model = The mentees and mentors arguments are self-explanatory. They are the mentors and mentees we want to pair up. The skillValue argument is the value we have assigned to each Skill for this problem. I will discuss the heuristic we use to calculate the value for a skill in a following section. The pairingDecision argument is a 4-dimensional SliceMap. The first dimension is the Skill, the second dimension is the Period, the third dimension is the Mentor, and the final dimension is the Mentee. The value in the SliceMap is a Boolean decision which indicates whether to use the pairing or not. We will be taking advantage of the slicing capabilities of SliceMaps to make the formulation more streamlined.\nThe first thing we need to do is create a set of constraints which state that a given Mentee may only be assigned once. We use a ConstraintBuilder Computation Expression and iterate through the mentees, creating a constraint for each mentee.\nlet menteeSingleAssignmentConstraints = ConstraintBuilder \"MenteeSingleAssignment\" { for mentee in mentees - sum pairingDecision.[All, All, All, mentee]  1.0 } Now we need to limit how many Mentees a Mentor can take on. This value is the MenteeCapacity of the Mentor. We will loop through the sequence of Mentors and create the constraints that we need.\nlet mentorMaxAssignmentConstraints = ConstraintBuilder \"MentorMaxAssignments\" { for mentor in mentors - let (MenteeCapacity menteeCapacity) = mentor.MaxMentees sum pairingDecision.[All, All, mentor, All]  float menteeCapacity } There is an important nuance to this problem that could easily be missed. Mentors can take on multiple Mentees. It is entirely possible that the same Mentor is mentoring two different Mentees at the same time. This does not make sense. We need to create a set of constraints which prevents this from happening. We will create a constraint for each Mentor and each period to ensure this is not the case.\nlet mentorSingleAssignmentForPeriodConstraints = ConstraintBuilder \"MentorSingleAssignmentForPeriod\" { for mentor in mentors do for period in mentor.Periods - let x = pairingDecision.[All, period, mentor, All] sum pairingDecision.[All, period, mentor, All]  1.0 } That is all the constraints that we need but we still need to create an expression that quantifies success, our objective function. We have assigned a value to each Skill. We want to award pairings of valuable skills. To do that we can multiply the Value of the Skill by the decision that corresponds to that skill. The SliceMap library provides a couple of conveniences for expressing this. The sum function and the .* operator. The sum function is a function meant to be used with SliceMaps to make translating from math notation to code more straightforward. It is not strictly necessary, but it does make this kind of work more straightforward. The .* operator is known as the Hadamard Product. If you have worked in Matlab, you probably recognize it. It is an element by element multiplication along matching dimensions. In this case it is going to multiply the value associated with each Skill by the pairing decision that it corresponds to.\nlet assignmentValueExpr = sum (skillValue .* pairingDecision) assignmentValueExpr is a mathematical expression which quantifies how good of a solution the Solver has found. This is the thing we are wanting the Solver to make as large as possible. From here we create an Objective and compose our model.\nlet maxAssignmentValueObjecitve = Objective.create \"MaxAssignmentValue\" Maximize assignmentValueExpr let model = Model.create maxAssignmentValueObjecitve | Model.addConstraints menteeSingleAssignmentConstraints | Model.addConstraints mentorMaxAssignmentConstraints | Model.addConstraints mentorSingleAssignmentForPeriodConstraints From here we can call the Solver.solve function and get our results.\nlet solveSettings = { SolverType = CBC MaxDuration = 1_000L WriteLPFile = None } let result = Solver.solve solveSettings model match result with | Optimal sln - Solution.getValues sln (pairingDecision.AsMap()) | Map.toSeq | Seq.filter (fun (k, v) - v = 1.0) // Get the Pairings that the solver selected  | Seq.map fst // Return just the tuple representing the pairing  | Result.Ok | _ - Result.Error \"Error Solving If you want to see the full solution, check out the repo where I put it together.\nQuantifying the Value of a Skill Earlier I mentioned that I would talk about the heuristic that was used to evaluate the value of a skill. I propose that we just rank the skills by the frequency of their occurrence and assign value based on its rank.\nlet private getSkillValue (mentees:Mentee seq) (mentors:Mentor seq) = let menteeSkills = mentees | Seq.collect (fun m - m.Skills) let mentorSkills = mentors | Seq.collect (fun m - m.Skills) let skillCounts = Seq.append menteeSkills mentorSkills | Seq.countBy id let numberOfSkills = Seq.length skillCounts skillCounts | Seq.sortBy snd | Seq.mapi (fun i (skill, _) - skill, float (numberOfSkills - i)) | Map.ofSeq This ranking and scoring will ensure that the solver will choose low frequency skills over high frequency skills. There are some bizarre edge cases that could crop up, but I don’t have the space to cover them here.\nWhy Mathematical Planning instead some other algorithm? While this was a fun challenge, it is important to step back and ask, “Why would I choose this technique over some other?” The question on Stack Exchange has an interesting discussion of different approaches people proposed. Each of them has their own merit. The reason that I often propose Mathematical Planning that it is easy to modify should the nature of the problem change. If some new constraint was required, it would be relatively easy to refactor the code and add it. Bespoke implementations of heuristics are often difficult to refactor and evolve over time.\nThis was a fun challenge and I hope it ends up being useful. If you have questions about whether your problem is a good candidate for Mathematical Planning, please reach out!\n",
  "wordCount" : "1437",
  "inLanguage": "en",
  "datePublished": "2020-12-03T00:00:00Z",
  "dateModified": "2020-12-03T00:00:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://matthewcrews.com/blog/2020/12/2020-12-03/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Matthew Crews",
    "logo": {
      "@type": "ImageObject",
      "url": "https://matthewcrews.com/favicon.ico"
    }
  }
}
</script>



</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        .theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://matthewcrews.com" accesskey="h" title="Matthew Crews (Alt + H)">Matthew Crews</a>
            <span class="logo-switches">
                <span class="theme-toggle" title="(Alt + T)">
                    <a id="theme-toggle" accesskey="t">
                        <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg>
                        <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                    </a>
                </span>
                
            </span>
        </div>
        <ul class="menu" id="menu" onscroll="menu_on_scroll()">
            <li>
                <a href="https://matthewcrews.com/about" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://matthewcrews.com/consulting" title="Consulting">
                    <span>Consulting</span>
                </a>
            </li></ul>
    </nav>
</header>

    <main class="main">

<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">
      The Mentor Matching Problem
    </h1>
    <div class="post-description">
      
    </div>
    <div class="post-meta">December 3, 2020

    </div>
  </header> 

  <div class="post-content">
<p>There are few things I love more than a fresh mathematical planning challenge so I was delighted when <a href="https://twitter.com/KAvignon">Kevin Avignon</a> reached out to me and asked me to look at a question he had posted on the Software Engineer Stack Exchange site. He wanted to know whether the question was a candidate for Mathematical Planning. <a href="https://softwareengineering.stackexchange.com/questions/418268/mentorship-schedule-matchmaking-algorithm">The question</a> is a really interesting problem of pairing Mentors and Mentees. Mentors have a set of skills they can teach. Mentees have a set of skills they are interested in learning. Both Mentors and Mentees only have certain times they are available. Mentors are also capable of mentoring multiple mentees.</p>
<p>So, for this sounds like a straightforward assignment problem but then there is a twist. The questioner wanted pairings of rare skills to be a higher priority than pairings of more common skills. Ah, now we have a Mathematical Planning problem! We have the three key ingredients:</p>
<ol>
<li>A Quantifiable Objective: We want to maximize the value of pairings based on the rarity of the skill</li>
<li>Constraints to follow: Mentors and Mentees must match on skills and availability</li>
<li>Decision to make: Which Mentors and Mentees do we pair at what time?</li>
</ol>
<p>Any time I see those three ingredients, I know I have a Mathematical Planning problem on my hands. I respond to Kevin and say, &ldquo;Yes! You have a great candidate for Mathematical Planning! I&rsquo;ll put something together for you this evening.&rdquo; I begin mulling this problem as the day goes by. Once the family is all in bed, I turn on my PC and start modeling!</p>
<h2 id="define-the-domain">Define the Domain<a hidden class="anchor" aria-hidden="true" href="#define-the-domain">#</a></h2>
<p>The first thing I do is put together a tiny domain of types to represent my problem. I encourage anyone who is writing these models in F# to take advantage of domain modeling because it will protect you again some nefarious bugs. To learn more, check out Scott Wlaschin&rsquo;s book <a href="https://fsharpforfunandprofit.com/books/">Domain Modeling Made Functional</a>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#66d9ef">namespace</span> MentorMatching

<span style="color:#66d9ef">module</span> Types <span style="color:#f92672">=</span>
    
    <span style="color:#66d9ef">type</span> <span style="color:#a6e22e">MentorId</span> <span style="color:#f92672">=</span> MentorId <span style="color:#66d9ef">of</span> <span style="color:#66d9ef">string</span>
    <span style="color:#66d9ef">type</span> <span style="color:#a6e22e">MenteeId</span> <span style="color:#f92672">=</span> MenteeId <span style="color:#66d9ef">of</span> <span style="color:#66d9ef">string</span>
    <span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Skill</span> <span style="color:#f92672">=</span> Skill <span style="color:#66d9ef">of</span> <span style="color:#66d9ef">string</span>
    <span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Period</span> <span style="color:#f92672">=</span> Period <span style="color:#66d9ef">of</span> int
    <span style="color:#66d9ef">type</span> <span style="color:#a6e22e">MenteeCapacity</span> <span style="color:#f92672">=</span> MenteeCapacity <span style="color:#66d9ef">of</span> int

    <span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Mentor</span> <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>
        MentorId <span style="color:#f92672">:</span> MentorId
        Skills <span style="color:#f92672">:</span> Skill Set
        Periods <span style="color:#f92672">:</span> Period Set
        MaxMentees <span style="color:#f92672">:</span> MenteeCapacity
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Mentee</span> <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>
        MenteeId <span style="color:#f92672">:</span> MenteeId
        Skills <span style="color:#f92672">:</span> Skill Set
        Periods <span style="color:#f92672">:</span> Period Set
    <span style="color:#f92672">}</span>
</code></pre></div><p>This simple set of types represent the problem space that I will build a mathematical planning model around. I now want to create a function which builds the model. I like to type out the functions signatures of what I am trying to implement beforehand as a way to get a high-level overview for that I am about to build. It&rsquo;s an idea I got from <a href="https://blog.ploeh.dk/">Mark Seemann</a> in his excellent PluralSight course <a href="https://app.pluralsight.com/library/courses/fsharp-type-driven-development/table-of-contents">Type-Driven Development with F#</a>. Here is the function signature that I come to.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#66d9ef">let</span> private buildModel <span style="color:#f92672">(</span>mentees<span style="color:#f92672">:</span>Mentee seq<span style="color:#f92672">)</span> <span style="color:#f92672">(</span>mentors<span style="color:#f92672">:</span>Mentor seq<span style="color:#f92672">)</span> <span style="color:#f92672">(</span>skillValue<span style="color:#f92672">:</span>SMap<span style="color:#f92672">&lt;</span>Skill<span style="color:#f92672">,</span><span style="color:#66d9ef">float</span><span style="color:#f92672">&gt;)</span> <span style="color:#f92672">(</span>pairingDecision<span style="color:#f92672">:</span>SMap4<span style="color:#f92672">&lt;</span>Skill<span style="color:#f92672">,</span>Period<span style="color:#f92672">,</span>Mentor<span style="color:#f92672">,</span>Mentee<span style="color:#f92672">,</span>Decision<span style="color:#f92672">&gt;)</span> <span style="color:#f92672">:</span> Model <span style="color:#f92672">=</span>
</code></pre></div><p>The <code>mentees</code> and <code>mentors</code> arguments are self-explanatory. They are the mentors and mentees we want to pair up. The <code>skillValue</code> argument is the value we have assigned to each <code>Skill</code> for this problem. I will discuss the heuristic we use to calculate the value for a skill in a following section. The <code>pairingDecision</code> argument is a 4-dimensional <a href="http://matthewcrews.com/SliceMap/#/">SliceMap</a>. The first dimension is the <code>Skill</code>, the second dimension is the <code>Period</code>, the third dimension is the <code>Mentor</code>, and the final dimension is the <code>Mentee</code>. The value in the SliceMap is a <code>Boolean</code> decision which indicates whether to use the pairing or not. We will be taking advantage of the slicing capabilities of SliceMaps to make the formulation more streamlined.</p>
<p>The first thing we need to do is create a set of constraints which state that a given <code>Mentee</code> may only be assigned once. We use a <code>ConstraintBuilder</code> Computation Expression and iterate through the <code>mentees</code>, creating a constraint for each <code>mentee</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#66d9ef">let</span> menteeSingleAssignmentConstraints <span style="color:#f92672">=</span>
    ConstraintBuilder <span style="color:#e6db74">&#34;MenteeSingleAssignment&#34;</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">for</span> mentee <span style="color:#66d9ef">in</span> mentees <span style="color:#f92672">-&gt;</span>
            sum pairingDecision<span style="color:#f92672">.[</span>All<span style="color:#f92672">,</span> All<span style="color:#f92672">,</span> All<span style="color:#f92672">,</span> mentee<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;==</span> 1<span style="color:#f92672">.</span>0
    <span style="color:#f92672">}</span>
</code></pre></div><p>Now we need to limit how many Mentees a Mentor can take on. This value is the <code>MenteeCapacity</code> of the <code>Mentor</code>. We will loop through the sequence of Mentors and create the constraints that we need.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#66d9ef">let</span> mentorMaxAssignmentConstraints <span style="color:#f92672">=</span>
    ConstraintBuilder <span style="color:#e6db74">&#34;MentorMaxAssignments&#34;</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">for</span> mentor <span style="color:#66d9ef">in</span> mentors <span style="color:#f92672">-&gt;</span>
            <span style="color:#66d9ef">let</span> <span style="color:#f92672">(</span>MenteeCapacity menteeCapacity<span style="color:#f92672">)</span> <span style="color:#f92672">=</span> mentor<span style="color:#f92672">.</span>MaxMentees
            sum pairingDecision<span style="color:#f92672">.[</span>All<span style="color:#f92672">,</span> All<span style="color:#f92672">,</span> mentor<span style="color:#f92672">,</span> All<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;==</span> <span style="color:#66d9ef">float</span> menteeCapacity
    <span style="color:#f92672">}</span>
</code></pre></div><p>There is an important nuance to this problem that could easily be missed. Mentors can take on multiple Mentees. It is entirely possible that the same Mentor is mentoring two different Mentees at the same time. This does not make sense. We need to create a set of constraints which prevents this from happening. We will create a constraint for each Mentor and each period to ensure this is not the case.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#66d9ef">let</span> mentorSingleAssignmentForPeriodConstraints <span style="color:#f92672">=</span>
    ConstraintBuilder <span style="color:#e6db74">&#34;MentorSingleAssignmentForPeriod&#34;</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">for</span> mentor <span style="color:#66d9ef">in</span> mentors <span style="color:#66d9ef">do</span>
            <span style="color:#66d9ef">for</span> period <span style="color:#66d9ef">in</span> mentor<span style="color:#f92672">.</span>Periods <span style="color:#f92672">-&gt;</span>
                <span style="color:#66d9ef">let</span> x <span style="color:#f92672">=</span> pairingDecision<span style="color:#f92672">.[</span>All<span style="color:#f92672">,</span> period<span style="color:#f92672">,</span> mentor<span style="color:#f92672">,</span> All<span style="color:#f92672">]</span>
                sum pairingDecision<span style="color:#f92672">.[</span>All<span style="color:#f92672">,</span> period<span style="color:#f92672">,</span> mentor<span style="color:#f92672">,</span> All<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;==</span> 1<span style="color:#f92672">.</span>0
    <span style="color:#f92672">}</span>
</code></pre></div><p>That is all the constraints that we need but we still need to create an expression that quantifies success, our objective function. We have assigned a value to each <code>Skill</code>. We want to award pairings of valuable skills. To do that we can multiply the <code>Value</code> of the <code>Skill</code> by the decision that corresponds to that skill. The <code>SliceMap</code> library provides a couple of conveniences for expressing this. The <code>sum</code> function and the <code>.*</code> operator. The <code>sum</code> function is a function meant to be used with SliceMaps to make translating from math notation to code more straightforward. It is not strictly necessary, but it does make this kind of work more straightforward. The <code>.*</code> operator is known as the <a href="https://en.wikipedia.org/wiki/Hadamard_product_(matrices)">Hadamard Product</a>. If you have worked in Matlab, you probably recognize it. It is an element by element multiplication along matching dimensions. In this case it is going to multiply the value associated with each <code>Skill</code> by the pairing decision that it corresponds to.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"> <span style="color:#66d9ef">let</span> assignmentValueExpr <span style="color:#f92672">=</span> sum <span style="color:#f92672">(</span>skillValue <span style="color:#f92672">.*</span> pairingDecision<span style="color:#f92672">)</span>
</code></pre></div><p><code>assignmentValueExpr</code> is a mathematical expression which quantifies how good of a solution the Solver has found. This is the thing we are wanting the Solver to make as large as possible. From here we create an <code>Objective</code> and compose our model.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#66d9ef">let</span> maxAssignmentValueObjecitve <span style="color:#f92672">=</span>
    Objective.create <span style="color:#e6db74">&#34;MaxAssignmentValue&#34;</span> Maximize assignmentValueExpr

<span style="color:#66d9ef">let</span> model <span style="color:#f92672">=</span>
    Model.create maxAssignmentValueObjecitve
    <span style="color:#f92672">|&gt;</span> Model.addConstraints menteeSingleAssignmentConstraints
    <span style="color:#f92672">|&gt;</span> Model.addConstraints mentorMaxAssignmentConstraints
    <span style="color:#f92672">|&gt;</span> Model.addConstraints mentorSingleAssignmentForPeriodConstraints
</code></pre></div><p>From here we can call the <code>Solver.solve</code> function and get our results.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#66d9ef">let</span> solveSettings <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>
    SolverType <span style="color:#f92672">=</span> CBC
    MaxDuration <span style="color:#f92672">=</span> 1_000L
    WriteLPFile <span style="color:#f92672">=</span> None
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">let</span> result <span style="color:#f92672">=</span> Solver.solve solveSettings model

<span style="color:#66d9ef">match</span> result <span style="color:#66d9ef">with</span>
<span style="color:#f92672">|</span> Optimal sln <span style="color:#f92672">-&gt;</span>
    Solution.getValues sln <span style="color:#f92672">(</span>pairingDecision<span style="color:#f92672">.</span>AsMap()<span style="color:#f92672">)</span>
    <span style="color:#f92672">|&gt;</span> Map.toSeq
    <span style="color:#f92672">|&gt;</span> Seq.filter <span style="color:#f92672">(</span><span style="color:#66d9ef">fun</span> <span style="color:#f92672">(</span>k<span style="color:#f92672">,</span> v<span style="color:#f92672">)</span> <span style="color:#f92672">-&gt;</span> v <span style="color:#f92672">&gt;=</span> 1<span style="color:#f92672">.</span>0<span style="color:#f92672">)</span> <span style="color:#75715e">// Get the Pairings that the solver selected
</span><span style="color:#75715e"></span>    <span style="color:#f92672">|&gt;</span> Seq.map fst <span style="color:#75715e">// Return just the tuple representing the pairing
</span><span style="color:#75715e"></span>    <span style="color:#f92672">|&gt;</span> Result.Ok
<span style="color:#f92672">|</span> <span style="color:#f92672">_</span> <span style="color:#f92672">-&gt;</span> Result.Error <span style="color:#e6db74">&#34;Error Solving
</span></code></pre></div><p>If you want to see the full solution, check out <a href="https://github.com/matthewcrews/MentorMatching">the repo</a> where I put it together.</p>
<h2 id="quantifying-the-value-of-a-skill">Quantifying the Value of a Skill<a hidden class="anchor" aria-hidden="true" href="#quantifying-the-value-of-a-skill">#</a></h2>
<p>Earlier I mentioned that I would talk about the heuristic that was used to evaluate the value of a skill. I propose that we just rank the skills by the frequency of their occurrence and assign value based on its rank.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#66d9ef">let</span> private getSkillValue <span style="color:#f92672">(</span>mentees<span style="color:#f92672">:</span>Mentee seq<span style="color:#f92672">)</span> <span style="color:#f92672">(</span>mentors<span style="color:#f92672">:</span>Mentor seq<span style="color:#f92672">)</span> <span style="color:#f92672">=</span>
    
    <span style="color:#66d9ef">let</span> menteeSkills <span style="color:#f92672">=</span>
        mentees
        <span style="color:#f92672">|&gt;</span> Seq.collect <span style="color:#f92672">(</span><span style="color:#66d9ef">fun</span> m <span style="color:#f92672">-&gt;</span> m<span style="color:#f92672">.</span>Skills<span style="color:#f92672">)</span>

    <span style="color:#66d9ef">let</span> mentorSkills <span style="color:#f92672">=</span>
        mentors
        <span style="color:#f92672">|&gt;</span> Seq.collect <span style="color:#f92672">(</span><span style="color:#66d9ef">fun</span> m <span style="color:#f92672">-&gt;</span> m<span style="color:#f92672">.</span>Skills<span style="color:#f92672">)</span>

    <span style="color:#66d9ef">let</span> skillCounts <span style="color:#f92672">=</span>
        Seq.append menteeSkills mentorSkills
        <span style="color:#f92672">|&gt;</span> Seq.countBy id

    <span style="color:#66d9ef">let</span> numberOfSkills <span style="color:#f92672">=</span> Seq.length skillCounts

    skillCounts
    <span style="color:#f92672">|&gt;</span> Seq.sortBy snd
    <span style="color:#f92672">|&gt;</span> Seq.mapi <span style="color:#f92672">(</span><span style="color:#66d9ef">fun</span> i <span style="color:#f92672">(</span>skill<span style="color:#f92672">,</span> <span style="color:#f92672">_)</span> <span style="color:#f92672">-&gt;</span> skill<span style="color:#f92672">,</span> <span style="color:#66d9ef">float</span> <span style="color:#f92672">(</span>numberOfSkills <span style="color:#f92672">-</span> i<span style="color:#f92672">))</span>
    <span style="color:#f92672">|&gt;</span> Map.ofSeq
</code></pre></div><p>This ranking and scoring will ensure that the solver will choose low frequency skills over high frequency skills. There are some bizarre edge cases that could crop up, but I don&rsquo;t have the space to cover them here.</p>
<h2 id="why-mathematical-planning-instead-some-other-algorithm">Why Mathematical Planning instead some other algorithm?<a hidden class="anchor" aria-hidden="true" href="#why-mathematical-planning-instead-some-other-algorithm">#</a></h2>
<p>While this was a fun challenge, it is important to step back and ask, &ldquo;Why would I choose this technique over some other?&rdquo; The question on Stack Exchange has an interesting discussion of different approaches people proposed. Each of them has their own merit. The reason that I often propose Mathematical Planning that it is easy to modify should the nature of the problem change. If some new constraint was required, it would be relatively easy to refactor the code and add it. Bespoke implementations of heuristics are often difficult to refactor and evolve over time.</p>
<p>This was a fun challenge and I hope it ends up being useful. If you have questions about whether your problem is a good candidate for Mathematical Planning, please reach out!</p>

</div>
  <footer class="post-footer">



<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share The Mentor Matching Problem on twitter"
        href="https://twitter.com/intent/tweet/?text=The%20Mentor%20Matching%20Problem&amp;url=https%3a%2f%2fmatthewcrews.com%2fblog%2f2020%2f12%2f2020-12-03%2f&amp;hashtags=">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share The Mentor Matching Problem on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fmatthewcrews.com%2fblog%2f2020%2f12%2f2020-12-03%2f&amp;title=The%20Mentor%20Matching%20Problem&amp;summary=The%20Mentor%20Matching%20Problem&amp;source=https%3a%2f%2fmatthewcrews.com%2fblog%2f2020%2f12%2f2020-12-03%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share The Mentor Matching Problem on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2fmatthewcrews.com%2fblog%2f2020%2f12%2f2020-12-03%2f&title=The%20Mentor%20Matching%20Problem">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share The Mentor Matching Problem on facebook"
        href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fmatthewcrews.com%2fblog%2f2020%2f12%2f2020-12-03%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share The Mentor Matching Problem on whatsapp"
        href="https://api.whatsapp.com/send?text=The%20Mentor%20Matching%20Problem%20-%20https%3a%2f%2fmatthewcrews.com%2fblog%2f2020%2f12%2f2020-12-03%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share The Mentor Matching Problem on telegram"
        href="https://telegram.me/share/url?text=The%20Mentor%20Matching%20Problem&amp;url=https%3a%2f%2fmatthewcrews.com%2fblog%2f2020%2f12%2f2020-12-03%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>

  </footer>
</article>
    </main><footer class="footer">
    <span>&copy; 2021 <a href="https://matthewcrews.com">Matthew Crews</a></span>
    <span>&middot;</span>
    <span>Powered by <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a></span>
    <span>&middot;</span>
    <span>Theme <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a></span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)">
    <button class="top-link" id="top-link" type="button" accesskey="g">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
    </button>
</a>



<script defer src="/assets/js/highlight.min.27cd435cc9ed6abb4b496581b151804f79f366c412620272bb94e2f5f598ebcc.js" integrity="sha256-J81DXMntartLSWWBsVGAT3nzZsQSYgJyu5Ti9fWY68w="
    onload="hljs.initHighlightingOnLoad();"></script>
<script>
    window.onload = function () {
        if (localStorage.getItem("menu-scroll-position")) {
            document.getElementById('menu').scrollLeft = localStorage.getItem("menu-scroll-position");
        }
    }
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.replaceState(null, null, `#${id}`);
            }
        });
    });
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

    function menu_on_scroll() {
        localStorage.setItem("menu-scroll-position", document.getElementById('menu').scrollLeft);
    }

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    MathJax = {
    tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
    }
    };
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
</script>
</body>

</html>
