<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Reindeer Secret Santa Assignment Problem | Matthew Crews</title>

<meta name="keywords" content="" />
<meta name="description" content="Note: To see the completed code, please go here. All code for Model Mondays is kept in this repo and is MIT licensed. Feel free to use it!
 I was having a chat with a friend about what types of problems are good candidates for Mathematical Planning. He posed the question, &ldquo;Would a Secret Santa exchange be a good candidate?&rdquo; At first, I thought, &ldquo;no.&rdquo; As we kept chatting though, I changed my mind.">
<meta name="author" content="">
<link rel="canonical" href="https://matthewcrews.com/blog/2020/12/2020-12-07/" />
<link href="/assets/css/stylesheet.min.d5d820de85dae34a78c22303e07aa685bb90ec25a056c702c0b1a964ca68861d.css" integrity="sha256-1dgg3oXa40p4wiMD4HqmhbuQ7CWgVscCwLGpZMpohh0=" rel="preload stylesheet"
    as="style">

<link rel="icon" href="https://matthewcrews.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://matthewcrews.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://matthewcrews.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://matthewcrews.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://matthewcrews.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.78.2" />


<meta property="og:title" content="Reindeer Secret Santa Assignment Problem" />
<meta property="og:description" content="Note: To see the completed code, please go here. All code for Model Mondays is kept in this repo and is MIT licensed. Feel free to use it!
 I was having a chat with a friend about what types of problems are good candidates for Mathematical Planning. He posed the question, &ldquo;Would a Secret Santa exchange be a good candidate?&rdquo; At first, I thought, &ldquo;no.&rdquo; As we kept chatting though, I changed my mind." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://matthewcrews.com/blog/2020/12/2020-12-07/" />
<meta property="article:published_time" content="2020-12-07T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-12-07T00:00:00+00:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Reindeer Secret Santa Assignment Problem"/>
<meta name="twitter:description" content="Note: To see the completed code, please go here. All code for Model Mondays is kept in this repo and is MIT licensed. Feel free to use it!
 I was having a chat with a friend about what types of problems are good candidates for Mathematical Planning. He posed the question, &ldquo;Would a Secret Santa exchange be a good candidate?&rdquo; At first, I thought, &ldquo;no.&rdquo; As we kept chatting though, I changed my mind."/>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Reindeer Secret Santa Assignment Problem",
  "name": "Reindeer Secret Santa Assignment Problem",
  "description": "Note: To see the completed code, please go here. All code for Model Mondays is kept in this repo and is MIT licensed. Feel free to use it!\n I was having a chat with a friend about …",
  "keywords": [
    
  ],
  "articleBody": " Note: To see the completed code, please go here. All code for Model Mondays is kept in this repo and is MIT licensed. Feel free to use it!\n I was having a chat with a friend about what types of problems are good candidates for Mathematical Planning. He posed the question, “Would a Secret Santa exchange be a good candidate?” At first, I thought, “no.” As we kept chatting though, I changed my mind. This is a great problem for Mathematical Planning.\nFor those who are not familiar with what a Secret Santa exchange is, it is when a group of people get together and all put their names in a hat. Everyone draws out a name. You then buy a gift for the person who’s name you drew. Normally everyone would get back together at a party and exchange gifts. The fun part is that you don’t know who is giving you a gift, so it is a double surprise.\nI initially did not think that this was a good candidate for Mathematical Planning because I didn’t see a quantifiable objective. There was no way to measure the difference in quality of the different pairings. All valid pairings are equally as good. Normally you would use Constraint Programming and/or SAT Solvers for these problems. SAT Solvers and Constraint Programming is interested in answering the question, “Is there an answer which satisfies these constraints?” versus Mathematical Planning which asks, “What is the best answer which satisfies these constraints?” The difference seems small, but the problem is wildly different. Finding the best answer to a problem is more difficult than finding an answer.\nOur conversation continued and my mind was still turning. A new piece of information dropped. This family does Secret Santa every year. Wait a minute, I thought. Don’t we want an answer which pairs you with new people each year? Wouldn’t it be better if you had someone different than you had the year before or the year before that?. This problem just became a Mathematical Planning problem!\nA Reindeer Gift Exchange I decide to embrace a bit of whimsy and instead of people exchanging gifts, I make it Reindeer. I mean, wouldn’t Santa’s reindeer want gifts as well? I begin modeling my problem by creating a simple domain to describe my problem.\ntype Reindeer = Reindeer of string type Giver = Giver of Reindeer type Receiver = Receiver of Reindeer type SecretSanta = { Reindeer : Reindeer PreviousReceivers : Receiver list } I assume I am going to get the names of the Reindeer as string so I wrap them in a single case Discriminated Union to provide context to the data. The Reindeer will be both givers and receivers so I make additional types to represent the direction of relationships: Giver and Receiver. The SecretSanta type represents a Reindeer and the other Reindeer they have given gifts in years past. The PreviousReceivers for a SecretSanta is an ordered list where the first element was the last reindeer the SecretSanta gave a gift to, the second element was the receipent two years ago, the third element the receiver three years ago, and so on. Our ideal solution has reindeer giving a gift to a different reindeer they have not given a gift to recently.\nNow I create a function which takes a list of SecretSanta, builds the model, solves it, and returns the assignments. I will call the function findAssignments.\nlet findAssignments (santas:SecretSanta list) = I now want to get the list of reindeer that I will be working with and create sets of Giver and Receiver. The reason for storing this data in a Set will become apparent in a few moments.\nlet reindeer = santas | List.map (fun s - s.Reindeer) | Set let givers = reindeer | Set.map Giver let receivers = reindeer | Set.map Receiver Measuring Solution Quality I now need to create the penalty values for assigning a reindeer to a reindeer whom they have given a gift to recently. I will do this by using the List.mapi function which allows me to iterate through a list while providing the index for the item you are on. I use a simple heuristic for calculating the penalty.\n$$\\text{penalty} = \\text{NumberOfPreviousRecipients}-\\text{index}$$\nWhat this does is provide a high penalty cost for assigning a reindeer to the reindeer they just given a gift to. From there the cost keeps going down. I will store the result in a SMap2 that will be indexed by the Giver type in the first dimension and the Receiver type in the second dimension. I have found using simple Discriminated Unions as a powerful tool for tracking how data is indexed.\nlet penalty = [ for s in santas do // Get the number of receivers once  let numberOfReceivers = s.PreviousReceivers.Length s.PreviousReceivers | List.mapi (fun idx r - ((Giver s.Reindeer), r), float (numberOfReceivers - idx)) ] | List.concat | SMap2 I now want to create the possible assignments. The key thing here is that it should not be possible to assign a reindeer to give a gift to itself. Therefore, I stored this data in a Set. The Set module has a convenient function Set.Remove which returns a new set with the single value removed from it. I will wrap the Reindeer values in the Giver and Receiver Discriminated Unions to provide context on what the values represent. This becomes incredibly valuable with using the slice notation of SliceMaps.\nlet possibleAssignments = seq { for giver in reindeer do // We only want pairings with different reindeer  for receiver in reindeer.Remove giver - (Giver giver, Receiver receiver) } We now have all the possible assignments for this reindeer Secret Santa exchange. I need to create a Boolean decision variable for each assignment. This decision variable is what the Solver engine will use to adjust to find a solution to my problem. 1.0 will indicate that the assignment should be used. 0.0 will indicate that the assignment should not be used.\nlet assignDecisions = DecisionBuilder \"Assignment\" { for pairing in possibleAssignments - Boolean } | SMap2 The decision variables are stored in a 2-dimensional SliceMap, SMap2, where the first index is of type Giver and the second dimension is Receiver. We now need to create some constraints to ensure our solutions make sense.\nThe Secret Santa Constraints We now need to provides some Constraints for our problem. The Constraints describe what is and is not allowed. Without Constraints, our Model would give nonsensical answers\nThe first set of constraints we will create are the giveOnlyOnce constraints. These state that a particular Giver may only give a gift once. We use the slice notation of SliceMaps to easily subset the values in assignDecisions. The compiler ensures that we are slicing the correct dimension because we have created types for Giver and Receiver.\nlet giveOnlyOnce = ConstraintBuilder \"GiveOnlyOnce\" { for giver in givers - sum assignDecisions.[giver, All] == 1.0 } The second set of constraints stipulate that a Receiver may only receiver one gift. We iterate through the receivers values and create a constraint for each.\nlet receiveOnlyOnce = ConstraintBuilder \"ReceiveOnlyOnce\" { for receiver in receivers - sum assignDecisions.[All, receiver] == 1.0 } How We Quantify the Assignments We now want to create our penalty expression which is the function the solver engine will try to minimize. Because we stored our data in SliceMaps, we can use the sum function and the Hadamard Product, .*, to express this in a single line.\nlet penaltyExpression = sum (penalty .* assignDecisions) We now create an Objective which states we want to Minimize this expression.\nlet objective = Objective.create \"MinimizePreviousPairings\" Minimize penaltyExpression Now let’s build the model by composing these elements.\nlet model = Model.create objective | Model.addConstraints giveOnlyOnce | Model.addConstraints receiveOnlyOnce We now attempt to solve the model and get the result.\nlet result = Solver.solve Settings.basic model We match on the case of the result to decide what to call next. In our case, we just want to print the assignments. If this were a production model, we would do something more sophisticated. If the model is solved successfully, we select the decisions where the value is equal to 1.0 which indicates that the solver thinks we should use that assignment. We return a list of parings if successful, we return an string saying we couldn’t find a solution if the solve was unsuccessful.\nmatch result with | Optimal solution - let selectedPairings = Solution.getValues solution assignDecisions | Map.filter (fun pair value - value = 1.0) | Map.toSeq | Seq.map fst Result.Ok selectedPairings | _ - Result.Error \"Unable to find pairings\" We will create some data to test it out and use the amazing Specture.Console library to print it out as a nice table. Here is the function for printing out the results of solving our model.\nlet prettyPrintResults (pairings: seqGiver * Receiver) = let table = Table() table.AddColumn(\"Giver\") | ignore table.AddColumn(\"Receiver\") | ignore for (Giver (Reindeer g), Receiver (Reindeer r)) in pairings do table.AddRow(g, r) | ignore AnsiConsole.Render(table) Finding the Santa Plan Now let’s throw some data together and see what we get.\nlet santas = [ { Reindeer = Reindeer \"Rudolph\"; PreviousReceivers = [ Receiver (Reindeer \"Blitzen\")]} { Reindeer = Reindeer \"Dasher\"; PreviousReceivers = [ Receiver (Reindeer \"Vixen\")]} { Reindeer = Reindeer \"Dancer\"; PreviousReceivers = [ Receiver (Reindeer \"Rudolph\")]} { Reindeer = Reindeer \"Prancer\"; PreviousReceivers = [ Receiver (Reindeer \"Cupid\")]} { Reindeer = Reindeer \"Vixen\"; PreviousReceivers = [ Receiver (Reindeer \"Dancer\")]} { Reindeer = Reindeer \"Comet\"; PreviousReceivers = [ Receiver (Reindeer \"Dasher\")]} { Reindeer = Reindeer \"Cupid\"; PreviousReceivers = [ Receiver (Reindeer \"Donner\")]} { Reindeer = Reindeer \"Donner\"; PreviousReceivers = [ Receiver (Reindeer \"Comet\")]} { Reindeer = Reindeer \"Blitzen\"; PreviousReceivers = [ Receiver (Reindeer \"Prancer\")]} ] let findResult = findAssignments santas match findResult with | Ok pairings - prettyPrintResults pairings | Error _ - printfn \"No Christmas this year :(\" When we run this, the console reports…\n┌─────────┬──────────┐\r│ Giver │ Receiver │\r├─────────┼──────────┤\r│ Blitzen │ Dasher │\r│ Comet │ Rudolph │\r│ Cupid │ Blitzen │\r│ Dancer │ Prancer │\r│ Dasher │ Dancer │\r│ Donner │ Cupid │\r│ Prancer │ Vixen │\r│ Rudolph │ Donner │\r│ Vixen │ Comet │\r└─────────┴──────────┘\rExcellent work! Another Secret Santa successfully planned!\nReal World Applications Though the domain for this problem was silly, the type of model this represents is common. Instead of reindeer and Secret Santa, this could have been operators and machines that they run. You would want operators to rotate through machines so that they are getting experience with all of them. This model would ensure that operators are regularly getting exposed to different machines.\nIt could also be software developers and projects. Each project could have a set of technologies they require, and the developers have the type of project they were just on. To ensure that the developers are getting exposed to different tools, a model like the one we just built ensures they are being moved around.\nAssignment problems are incredibly common and normally there is some quantification of “goodness”. Assigning people to projects, assigning tools to work sites, assigning jobs to groups. Assignment problems come up in every industry.\nLet me know if there are specific problems you would like me to work on. Feel free to use this model and modify it for your own purposes.\n",
  "wordCount" : "1897",
  "inLanguage": "en",
  "datePublished": "2020-12-07T00:00:00Z",
  "dateModified": "2020-12-07T00:00:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://matthewcrews.com/blog/2020/12/2020-12-07/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Matthew Crews",
    "logo": {
      "@type": "ImageObject",
      "url": "https://matthewcrews.com/favicon.ico"
    }
  }
}
</script>



</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        .theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://matthewcrews.com" accesskey="h" title="Matthew Crews (Alt + H)">Matthew Crews</a>
            <span class="logo-switches">
                <span class="theme-toggle" title="(Alt + T)">
                    <a id="theme-toggle" accesskey="t">
                        <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg>
                        <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                    </a>
                </span>
                
            </span>
        </div>
        <ul class="menu" id="menu" onscroll="menu_on_scroll()">
            <li>
                <a href="https://matthewcrews.com/about" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://matthewcrews.com/consulting" title="Consulting">
                    <span>Consulting</span>
                </a>
            </li>
            <li>
                <a href="https://matthewcrews.com/mathematical-planning" title="Mathamatical Planning">
                    <span>Mathamatical Planning</span>
                </a>
            </li></ul>
    </nav>
</header>

    <main class="main">

<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">
      Reindeer Secret Santa Assignment Problem
    </h1>
    <div class="post-description">
      
    </div>
    <div class="post-meta">December 7, 2020

    </div>
  </header> 

  <div class="post-content">
<blockquote>
<p>Note: To see the completed code, please go <a href="https://github.com/matthewcrews/modelmondays/blob/main/ModelMonday/2020-12-06-SecretSantaExchange.fs">here</a>. All code for Model Mondays is kept in <a href="https://github.com/matthewcrews/modelmondays">this</a> repo and is MIT licensed. Feel free to use it!</p>
</blockquote>
<p>I was having a chat with a friend about what types of problems are good candidates for Mathematical Planning. He posed the question, &ldquo;Would a Secret Santa exchange be a good candidate?&rdquo; At first, I thought, &ldquo;no.&rdquo; As we kept chatting though, I changed my mind. This is a great problem for Mathematical Planning.</p>
<p>For those who are not familiar with what a Secret Santa exchange is, it is when a group of people get together and all put their names in a hat. Everyone draws out a name. You then buy a gift for the person who&rsquo;s name you drew. Normally everyone would get back together at a party and exchange gifts. The fun part is that you don&rsquo;t know who is giving you a gift, so it is a double surprise.</p>
<p>I initially did not think that this was a good candidate for Mathematical Planning because I didn&rsquo;t see a quantifiable objective. There was no way to measure the difference in quality of the different pairings. All valid pairings are equally as good. Normally you would use <a href="https://en.wikipedia.org/wiki/Constraint_programming">Constraint Programming</a> and/or <a href="https://en.wikipedia.org/wiki/Boolean_satisfiability_problem#Online_SAT_solvers">SAT Solvers</a> for these problems. SAT Solvers and Constraint Programming is interested in answering the question, &ldquo;Is there an answer which satisfies these constraints?&rdquo; versus Mathematical Planning which asks, &ldquo;What is the <strong>best</strong> answer which satisfies these constraints?&rdquo; The difference seems small, but the problem is wildly different. Finding the <strong>best</strong> answer to a problem is more difficult than finding <strong>an</strong> answer.</p>
<p>Our conversation continued and my mind was still turning. A new piece of information dropped. This family does Secret Santa every year. <em>Wait a minute</em>, I thought. <em>Don&rsquo;t we want an answer which pairs you with new people each year? Wouldn&rsquo;t it be better if you had someone different than you had the year before or the year before that?</em>. This problem just became a Mathematical Planning problem!</p>
<h2 id="a-reindeer-gift-exchange">A Reindeer Gift Exchange<a hidden class="anchor" aria-hidden="true" href="#a-reindeer-gift-exchange">#</a></h2>
<p>I decide to embrace a bit of whimsy and instead of people exchanging gifts, I make it Reindeer. I mean, wouldn&rsquo;t Santa&rsquo;s reindeer want gifts as well? I begin modeling my problem by creating a simple domain to describe my problem.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Reindeer</span> <span style="color:#f92672">=</span> Reindeer <span style="color:#66d9ef">of</span> <span style="color:#66d9ef">string</span>
<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Giver</span> <span style="color:#f92672">=</span> Giver <span style="color:#66d9ef">of</span> Reindeer
<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Receiver</span> <span style="color:#f92672">=</span> Receiver <span style="color:#66d9ef">of</span> Reindeer
<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">SecretSanta</span> <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>
    Reindeer <span style="color:#f92672">:</span> Reindeer
    PreviousReceivers <span style="color:#f92672">:</span> Receiver <span style="color:#66d9ef">list</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>I assume I am going to get the names of the Reindeer as <code>string</code> so I wrap them in a single case Discriminated Union to provide context to the data. The <code>Reindeer</code> will be both givers and receivers so I make additional types to represent the direction of relationships: <code>Giver</code> and <code>Receiver</code>. The <code>SecretSanta</code> type represents a <code>Reindeer</code> and the other <code>Reindeer</code> they have given gifts in years past. The <code>PreviousReceivers</code> for a <code>SecretSanta</code> is an ordered list where the first element was the last reindeer the <code>SecretSanta</code> gave a gift to, the second element was the receipent two years ago, the third element the receiver three years ago, and so on. Our ideal solution has reindeer giving a gift to a different reindeer they have not given a gift to recently.</p>
<p>Now I create a function which takes a list of <code>SecretSanta</code>, builds the model, solves it, and returns the assignments. I will call the function <code>findAssignments</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#66d9ef">let</span> findAssignments <span style="color:#f92672">(</span>santas<span style="color:#f92672">:</span>SecretSanta <span style="color:#66d9ef">list</span><span style="color:#f92672">)</span> <span style="color:#f92672">=</span>
</code></pre></div><p>I now want to get the list of reindeer that I will be working with and create sets of <code>Giver</code> and <code>Receiver</code>. The reason for storing this data in a <code>Set</code> will become apparent in a few moments.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#66d9ef">let</span> reindeer <span style="color:#f92672">=</span>
    santas
    <span style="color:#f92672">|&gt;</span> List.map <span style="color:#f92672">(</span><span style="color:#66d9ef">fun</span> s <span style="color:#f92672">-&gt;</span> s<span style="color:#f92672">.</span>Reindeer<span style="color:#f92672">)</span>
    <span style="color:#f92672">|&gt;</span> Set

<span style="color:#66d9ef">let</span> givers <span style="color:#f92672">=</span> reindeer <span style="color:#f92672">|&gt;</span> Set.map Giver
<span style="color:#66d9ef">let</span> receivers <span style="color:#f92672">=</span> reindeer <span style="color:#f92672">|&gt;</span> Set.map Receiver
</code></pre></div><h2 id="measuring-solution-quality">Measuring Solution Quality<a hidden class="anchor" aria-hidden="true" href="#measuring-solution-quality">#</a></h2>
<p>I now need to create the penalty values for assigning a reindeer to a reindeer whom they have given a gift to recently. I will do this by using the <code>List.mapi</code> function which allows me to iterate through a list while providing the index for the item you are on. I use a simple heuristic for calculating the penalty.</p>
<p>$$\text{penalty} = \text{NumberOfPreviousRecipients}-\text{index}$$</p>
<p>What this does is provide a high penalty cost for assigning a reindeer to the reindeer they just given a gift to. From there the cost keeps going down. I will store the result in a <code>SMap2</code> that will be indexed by the <code>Giver</code> type in the first dimension and the <code>Receiver</code> type in the second dimension. I have found using simple Discriminated Unions as a powerful tool for tracking how data is indexed.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#66d9ef">let</span> penalty <span style="color:#f92672">=</span>
    <span style="color:#f92672">[</span> <span style="color:#66d9ef">for</span> s <span style="color:#66d9ef">in</span> santas <span style="color:#66d9ef">do</span>
        <span style="color:#75715e">// Get the number of receivers once
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">let</span> numberOfReceivers <span style="color:#f92672">=</span> s<span style="color:#f92672">.</span>PreviousReceivers<span style="color:#f92672">.</span>Length
        s<span style="color:#f92672">.</span>PreviousReceivers
        <span style="color:#f92672">|&gt;</span> List.mapi <span style="color:#f92672">(</span><span style="color:#66d9ef">fun</span> idx r <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">((</span>Giver s<span style="color:#f92672">.</span>Reindeer<span style="color:#f92672">),</span> r<span style="color:#f92672">),</span> <span style="color:#66d9ef">float</span> <span style="color:#f92672">(</span>numberOfReceivers <span style="color:#f92672">-</span> idx<span style="color:#f92672">))</span>
    <span style="color:#f92672">]</span> <span style="color:#f92672">|&gt;</span> List.concat
    <span style="color:#f92672">|&gt;</span> SMap2
</code></pre></div><p>I now want to create the possible assignments. The key thing here is that it should not be possible to assign a reindeer to give a gift to itself. Therefore, I stored this data in a <code>Set</code>. The <code>Set</code> module has a convenient function <code>Set.Remove</code> which returns a new set with the single value removed from it. I will wrap the <code>Reindeer</code> values in the <code>Giver</code> and <code>Receiver</code> Discriminated Unions to provide context on what the values represent. This becomes incredibly valuable with using the slice notation of SliceMaps.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#66d9ef">let</span> possibleAssignments <span style="color:#f92672">=</span>
    seq <span style="color:#f92672">{</span> <span style="color:#66d9ef">for</span> giver <span style="color:#66d9ef">in</span> reindeer <span style="color:#66d9ef">do</span>
            <span style="color:#75715e">// We only want pairings with different reindeer
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">for</span> receiver <span style="color:#66d9ef">in</span> reindeer<span style="color:#f92672">.</span>Remove giver <span style="color:#f92672">-&gt;</span>
                <span style="color:#f92672">(</span>Giver giver<span style="color:#f92672">,</span> Receiver receiver<span style="color:#f92672">)</span>
    <span style="color:#f92672">}</span>
</code></pre></div><p>We now have all the possible assignments for this reindeer Secret Santa exchange. I need to create a <code>Boolean</code> decision variable for each assignment. This decision variable is what the <code>Solver</code> engine will use to adjust to find a solution to my problem. <code>1.0</code> will indicate that the assignment should be used. <code>0.0</code> will indicate that the assignment should not be used.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#66d9ef">let</span> assignDecisions <span style="color:#f92672">=</span>
    DecisionBuilder <span style="color:#e6db74">&#34;Assignment&#34;</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">for</span> pairing <span style="color:#66d9ef">in</span> possibleAssignments <span style="color:#f92672">-&gt;</span>
            Boolean
    <span style="color:#f92672">}</span> <span style="color:#f92672">|&gt;</span> SMap2
</code></pre></div><p>The decision variables are stored in a 2-dimensional SliceMap, <code>SMap2</code>, where the first index is of type <code>Giver</code> and the second dimension is <code>Receiver</code>. We now need to create some constraints to ensure our solutions make sense.</p>
<h2 id="the-secret-santa-constraints">The Secret Santa Constraints<a hidden class="anchor" aria-hidden="true" href="#the-secret-santa-constraints">#</a></h2>
<p>We now need to provides some Constraints for our problem. The Constraints describe what is and is not allowed. Without Constraints, our Model would give nonsensical answers</p>
<p>The first set of constraints we will create are the <code>giveOnlyOnce</code> constraints. These state that a particular <code>Giver</code> may only give a gift once. We use the slice notation of SliceMaps to easily subset the values in <code>assignDecisions</code>. The compiler ensures that we are slicing the correct dimension because we have created types for <code>Giver</code> and <code>Receiver</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#66d9ef">let</span> giveOnlyOnce <span style="color:#f92672">=</span>
    ConstraintBuilder <span style="color:#e6db74">&#34;GiveOnlyOnce&#34;</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">for</span> giver <span style="color:#66d9ef">in</span> givers <span style="color:#f92672">-&gt;</span>
            sum assignDecisions<span style="color:#f92672">.[</span>giver<span style="color:#f92672">,</span> All<span style="color:#f92672">]</span> <span style="color:#f92672">==</span> 1<span style="color:#f92672">.</span>0
    <span style="color:#f92672">}</span>
</code></pre></div><p>The second set of constraints stipulate that a <code>Receiver</code> may only receiver one gift. We iterate through the <code>receivers</code> values and create a constraint for each.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#66d9ef">let</span> receiveOnlyOnce <span style="color:#f92672">=</span>
    ConstraintBuilder <span style="color:#e6db74">&#34;ReceiveOnlyOnce&#34;</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">for</span> receiver <span style="color:#66d9ef">in</span> receivers <span style="color:#f92672">-&gt;</span>
            sum assignDecisions<span style="color:#f92672">.[</span>All<span style="color:#f92672">,</span> receiver<span style="color:#f92672">]</span> <span style="color:#f92672">==</span> 1<span style="color:#f92672">.</span>0
    <span style="color:#f92672">}</span>
</code></pre></div><h2 id="how-we-quantify-the-assignments">How We Quantify the Assignments<a hidden class="anchor" aria-hidden="true" href="#how-we-quantify-the-assignments">#</a></h2>
<p>We now want to create our penalty expression which is the function the solver engine will try to minimize. Because we stored our data in SliceMaps, we can use the <code>sum</code> function and the <a href="https://en.wikipedia.org/wiki/Hadamard_product_(matrices)">Hadamard Product</a>, <code>.*</code>, to express this in a single line.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#66d9ef">let</span> penaltyExpression <span style="color:#f92672">=</span> sum <span style="color:#f92672">(</span>penalty <span style="color:#f92672">.*</span> assignDecisions<span style="color:#f92672">)</span>
</code></pre></div><p>We now create an <code>Objective</code> which states we want to <code>Minimize</code> this expression.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#66d9ef">let</span> objective <span style="color:#f92672">=</span> 
    Objective.create <span style="color:#e6db74">&#34;MinimizePreviousPairings&#34;</span> Minimize penaltyExpression
</code></pre></div><p>Now let&rsquo;s build the model by composing these elements.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#66d9ef">let</span> model <span style="color:#f92672">=</span>
    Model.create objective
    <span style="color:#f92672">|&gt;</span> Model.addConstraints giveOnlyOnce
    <span style="color:#f92672">|&gt;</span> Model.addConstraints receiveOnlyOnce
</code></pre></div><p>We now attempt to solve the model and get the result.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#66d9ef">let</span> result <span style="color:#f92672">=</span> Solver.solve Settings.basic model
</code></pre></div><p>We match on the case of the <code>result</code> to decide what to call next. In our case, we just want to print the assignments. If this were a production model, we would do something more sophisticated. If the model is solved successfully, we select the decisions where the value is equal to <code>1.0</code> which indicates that the solver thinks we should use that assignment. We return a list of parings if successful, we return an string saying we couldn&rsquo;t find a solution if the solve was unsuccessful.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#66d9ef">match</span> result <span style="color:#66d9ef">with</span>
<span style="color:#f92672">|</span> Optimal solution <span style="color:#f92672">-&gt;</span>
    <span style="color:#66d9ef">let</span> selectedPairings <span style="color:#f92672">=</span>
        Solution.getValues solution assignDecisions
        <span style="color:#f92672">|&gt;</span> Map.filter <span style="color:#f92672">(</span><span style="color:#66d9ef">fun</span> pair value <span style="color:#f92672">-&gt;</span> value <span style="color:#f92672">=</span> 1<span style="color:#f92672">.</span>0<span style="color:#f92672">)</span>
        <span style="color:#f92672">|&gt;</span> Map.toSeq
        <span style="color:#f92672">|&gt;</span> Seq.map fst
    Result.Ok selectedPairings
<span style="color:#f92672">|</span> <span style="color:#f92672">_</span> <span style="color:#f92672">-&gt;</span> Result.Error <span style="color:#e6db74">&#34;Unable to find pairings&#34;</span>
</code></pre></div><p>We will create some data to test it out and use the amazing <code>Specture.Console</code> library to print it out as a nice table. Here is the function for printing out the results of solving our model.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#66d9ef">let</span> prettyPrintResults <span style="color:#f92672">(</span>pairings<span style="color:#f92672">:</span> seq<span style="color:#f92672">&lt;</span>Giver <span style="color:#f92672">*</span> Receiver<span style="color:#f92672">&gt;)</span> <span style="color:#f92672">=</span>
    <span style="color:#66d9ef">let</span> table <span style="color:#f92672">=</span> Table()
    table<span style="color:#f92672">.</span>AddColumn<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Giver&#34;</span><span style="color:#f92672">)</span> <span style="color:#f92672">|&gt;</span> ignore
    table<span style="color:#f92672">.</span>AddColumn<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Receiver&#34;</span><span style="color:#f92672">)</span> <span style="color:#f92672">|&gt;</span> ignore

    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>Giver <span style="color:#f92672">(</span>Reindeer g<span style="color:#f92672">),</span> Receiver <span style="color:#f92672">(</span>Reindeer r<span style="color:#f92672">))</span> <span style="color:#66d9ef">in</span> pairings <span style="color:#66d9ef">do</span>
        table<span style="color:#f92672">.</span>AddRow<span style="color:#f92672">(</span>g<span style="color:#f92672">,</span> r<span style="color:#f92672">)</span> <span style="color:#f92672">|&gt;</span> ignore

    AnsiConsole.Render<span style="color:#f92672">(</span>table<span style="color:#f92672">)</span>
</code></pre></div><h2 id="finding-the-santa-plan">Finding the Santa Plan<a hidden class="anchor" aria-hidden="true" href="#finding-the-santa-plan">#</a></h2>
<p>Now let&rsquo;s throw some data together and see what we get.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#66d9ef">let</span> santas <span style="color:#f92672">=</span>
    <span style="color:#f92672">[</span>
        <span style="color:#f92672">{</span> Reindeer <span style="color:#f92672">=</span> Reindeer <span style="color:#e6db74">&#34;Rudolph&#34;</span><span style="color:#f92672">;</span> PreviousReceivers <span style="color:#f92672">=</span> <span style="color:#f92672">[</span> Receiver <span style="color:#f92672">(</span>Reindeer <span style="color:#e6db74">&#34;Blitzen&#34;</span><span style="color:#f92672">)]}</span>
        <span style="color:#f92672">{</span> Reindeer <span style="color:#f92672">=</span> Reindeer <span style="color:#e6db74">&#34;Dasher&#34;</span><span style="color:#f92672">;</span>  PreviousReceivers <span style="color:#f92672">=</span> <span style="color:#f92672">[</span> Receiver <span style="color:#f92672">(</span>Reindeer <span style="color:#e6db74">&#34;Vixen&#34;</span><span style="color:#f92672">)]}</span>
        <span style="color:#f92672">{</span> Reindeer <span style="color:#f92672">=</span> Reindeer <span style="color:#e6db74">&#34;Dancer&#34;</span><span style="color:#f92672">;</span>  PreviousReceivers <span style="color:#f92672">=</span> <span style="color:#f92672">[</span> Receiver <span style="color:#f92672">(</span>Reindeer <span style="color:#e6db74">&#34;Rudolph&#34;</span><span style="color:#f92672">)]}</span>
        <span style="color:#f92672">{</span> Reindeer <span style="color:#f92672">=</span> Reindeer <span style="color:#e6db74">&#34;Prancer&#34;</span><span style="color:#f92672">;</span> PreviousReceivers <span style="color:#f92672">=</span> <span style="color:#f92672">[</span> Receiver <span style="color:#f92672">(</span>Reindeer <span style="color:#e6db74">&#34;Cupid&#34;</span><span style="color:#f92672">)]}</span>
        <span style="color:#f92672">{</span> Reindeer <span style="color:#f92672">=</span> Reindeer <span style="color:#e6db74">&#34;Vixen&#34;</span><span style="color:#f92672">;</span>   PreviousReceivers <span style="color:#f92672">=</span> <span style="color:#f92672">[</span> Receiver <span style="color:#f92672">(</span>Reindeer <span style="color:#e6db74">&#34;Dancer&#34;</span><span style="color:#f92672">)]}</span>
        <span style="color:#f92672">{</span> Reindeer <span style="color:#f92672">=</span> Reindeer <span style="color:#e6db74">&#34;Comet&#34;</span><span style="color:#f92672">;</span>   PreviousReceivers <span style="color:#f92672">=</span> <span style="color:#f92672">[</span> Receiver <span style="color:#f92672">(</span>Reindeer <span style="color:#e6db74">&#34;Dasher&#34;</span><span style="color:#f92672">)]}</span>
        <span style="color:#f92672">{</span> Reindeer <span style="color:#f92672">=</span> Reindeer <span style="color:#e6db74">&#34;Cupid&#34;</span><span style="color:#f92672">;</span>   PreviousReceivers <span style="color:#f92672">=</span> <span style="color:#f92672">[</span> Receiver <span style="color:#f92672">(</span>Reindeer <span style="color:#e6db74">&#34;Donner&#34;</span><span style="color:#f92672">)]}</span>
        <span style="color:#f92672">{</span> Reindeer <span style="color:#f92672">=</span> Reindeer <span style="color:#e6db74">&#34;Donner&#34;</span><span style="color:#f92672">;</span>  PreviousReceivers <span style="color:#f92672">=</span> <span style="color:#f92672">[</span> Receiver <span style="color:#f92672">(</span>Reindeer <span style="color:#e6db74">&#34;Comet&#34;</span><span style="color:#f92672">)]}</span>
        <span style="color:#f92672">{</span> Reindeer <span style="color:#f92672">=</span> Reindeer <span style="color:#e6db74">&#34;Blitzen&#34;</span><span style="color:#f92672">;</span> PreviousReceivers <span style="color:#f92672">=</span> <span style="color:#f92672">[</span> Receiver <span style="color:#f92672">(</span>Reindeer <span style="color:#e6db74">&#34;Prancer&#34;</span><span style="color:#f92672">)]}</span>
    <span style="color:#f92672">]</span>

<span style="color:#66d9ef">let</span> findResult <span style="color:#f92672">=</span> findAssignments santas

<span style="color:#66d9ef">match</span> findResult <span style="color:#66d9ef">with</span>
<span style="color:#f92672">|</span> Ok pairings <span style="color:#f92672">-&gt;</span> prettyPrintResults pairings
<span style="color:#f92672">|</span> Error <span style="color:#f92672">_</span> <span style="color:#f92672">-&gt;</span> printfn <span style="color:#e6db74">&#34;No Christmas this year :(&#34;</span>
</code></pre></div><p>When we run this, the console reports&hellip;</p>
<pre><code class="language-console" data-lang="console">┌─────────┬──────────┐
│ Giver   │ Receiver │
├─────────┼──────────┤
│ Blitzen │ Dasher   │
│ Comet   │ Rudolph  │
│ Cupid   │ Blitzen  │
│ Dancer  │ Prancer  │
│ Dasher  │ Dancer   │
│ Donner  │ Cupid    │
│ Prancer │ Vixen    │
│ Rudolph │ Donner   │
│ Vixen   │ Comet    │
└─────────┴──────────┘
</code></pre><p>Excellent work! Another Secret Santa successfully planned!</p>
<h2 id="real-world-applications">Real World Applications<a hidden class="anchor" aria-hidden="true" href="#real-world-applications">#</a></h2>
<p>Though the domain for this problem was silly, the type of model this represents is common. Instead of reindeer and Secret Santa, this could have been operators and machines that they run. You would want operators to rotate through machines so that they are getting experience with all of them. This model would ensure that operators are regularly getting exposed to different machines.</p>
<p>It could also be software developers and projects. Each project could have a set of technologies they require, and the developers have the type of project they were just on. To ensure that the developers are getting exposed to different tools, a model like the one we just built ensures they are being moved around.</p>
<p>Assignment problems are incredibly common and normally there is some quantification of &ldquo;goodness&rdquo;. Assigning people to projects, assigning tools to work sites, assigning jobs to groups. Assignment problems come up in every industry.</p>
<p>Let me know if there are specific problems you would like me to work on. Feel free to use this model and modify it for your own purposes.</p>

</div>
  <footer class="post-footer">



<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share Reindeer Secret Santa Assignment Problem on twitter"
        href="https://twitter.com/intent/tweet/?text=Reindeer%20Secret%20Santa%20Assignment%20Problem&amp;url=https%3a%2f%2fmatthewcrews.com%2fblog%2f2020%2f12%2f2020-12-07%2f&amp;hashtags=">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Reindeer Secret Santa Assignment Problem on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fmatthewcrews.com%2fblog%2f2020%2f12%2f2020-12-07%2f&amp;title=Reindeer%20Secret%20Santa%20Assignment%20Problem&amp;summary=Reindeer%20Secret%20Santa%20Assignment%20Problem&amp;source=https%3a%2f%2fmatthewcrews.com%2fblog%2f2020%2f12%2f2020-12-07%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Reindeer Secret Santa Assignment Problem on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2fmatthewcrews.com%2fblog%2f2020%2f12%2f2020-12-07%2f&title=Reindeer%20Secret%20Santa%20Assignment%20Problem">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Reindeer Secret Santa Assignment Problem on facebook"
        href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fmatthewcrews.com%2fblog%2f2020%2f12%2f2020-12-07%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Reindeer Secret Santa Assignment Problem on whatsapp"
        href="https://api.whatsapp.com/send?text=Reindeer%20Secret%20Santa%20Assignment%20Problem%20-%20https%3a%2f%2fmatthewcrews.com%2fblog%2f2020%2f12%2f2020-12-07%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Reindeer Secret Santa Assignment Problem on telegram"
        href="https://telegram.me/share/url?text=Reindeer%20Secret%20Santa%20Assignment%20Problem&amp;url=https%3a%2f%2fmatthewcrews.com%2fblog%2f2020%2f12%2f2020-12-07%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>

  </footer>
</article>
    </main><footer class="footer">
    <span>&copy; 2021 <a href="https://matthewcrews.com">Matthew Crews</a></span>
    <span>&middot;</span>
    <span>Powered by <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a></span>
    <span>&middot;</span>
    <span>Theme <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a></span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)">
    <button class="top-link" id="top-link" type="button" accesskey="g">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
    </button>
</a>



<script defer src="/assets/js/highlight.min.27cd435cc9ed6abb4b496581b151804f79f366c412620272bb94e2f5f598ebcc.js" integrity="sha256-J81DXMntartLSWWBsVGAT3nzZsQSYgJyu5Ti9fWY68w="
    onload="hljs.initHighlightingOnLoad();"></script>
<script>
    window.onload = function () {
        if (localStorage.getItem("menu-scroll-position")) {
            document.getElementById('menu').scrollLeft = localStorage.getItem("menu-scroll-position");
        }
    }
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.replaceState(null, null, `#${id}`);
            }
        });
    });
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

    function menu_on_scroll() {
        localStorage.setItem("menu-scroll-position", document.getElementById('menu').scrollLeft);
    }

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    MathJax = {
    tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
    }
    };
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
</script>
</body>

</html>
